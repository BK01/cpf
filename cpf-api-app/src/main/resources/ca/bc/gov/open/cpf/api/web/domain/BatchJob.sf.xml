<?xml version="1.0" encoding="UTF-8"?>
<beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:p="http://www.springframework.org/schema/p"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-4.1.xsd
  "
>

  <bean
    name="/CPF/CPF_BATCH_JOBS-htmlbuilder"
    class="ca.bc.gov.open.cpf.api.web.builder.BatchJobUiBuilder"
    p:batchJobService-ref="batchJobService"
  >
    <property name="pages">
      <list>
        <bean
          p:name="list"
          class="com.revolsys.ui.web.config.Page"
          p:title="Batch Jobs"
          p:path="/admin/jobs/"
          p:permission="hasRole('ROLE_ADMIN') or hasRoleRegex('ROLE_ADMIN_MODULE_.*_ADMIN')" />
        <bean
          p:name="moduleAppList"
          class="com.revolsys.ui.web.config.Page"
          p:title="Batch Jobs"
          p:path="/admin/modules/{moduleName}/apps/{businessApplicationName}/jobs/" />
        <bean
          p:name="moduleAppView"
          class="com.revolsys.ui.web.config.Page"
          p:title="Batch Job {batchJobId}"
          p:path="/admin/modules/{moduleName}/apps/{businessApplicationName}/jobs/{batchJobId}/" />

        <bean
          p:name="moduleAppCancel"
          class="com.revolsys.ui.web.config.Page"
          p:title="Cancel Batch Job {batchJobId}"
          p:path="/admin/modules/{moduleName}/apps/{businessApplicationName}/jobs/{batchJobId}/cancel/" />

        <bean
          p:name="moduleAppDelete"
          class="com.revolsys.ui.web.config.Page"
          p:title="Cancel Batch Job {batchJobId}"
          p:path="/admin/modules/{moduleName}/apps/{businessApplicationName}/jobs/{batchJobId}/delete/" />

        <bean
          p:name="clientList"
          class="com.revolsys.ui.web.config.Page"
          p:title="Batch Jobs"
          p:path="/ws/jobs/" />
        <bean
          p:name="clientView"
          class="com.revolsys.ui.web.config.Page"
          p:title="Batch Job {batchJobId}"
          p:path="/ws/jobs/{batchJobId}/" />
        <bean
          p:name="clientCancel"
          class="com.revolsys.ui.web.config.Page"
          p:title="Job"
          p:path="/ws/jobs/{batchJobId}/cancel/" />
        <bean
          p:name="clientDelete"
          class="com.revolsys.ui.web.config.Page"
          p:title="Job"
          p:path="/ws/jobs/{batchJobId}/delete/" />
        <bean
          p:name="clientAppList"
          class="com.revolsys.ui.web.config.Page"
          p:title="Batch Jobs"
          p:path="/ws/apps/{businessApplicationName}/jobs/" />
      </list>
    </property>
    <property name="views">
      <map>
        <entry key="list">
          <list>
            <bean
              p:name="BATCH_JOB_ID"
              class="com.revolsys.ui.html.serializer.key.PageLinkKeySerializer"
              p:label="ID"
              p:pageName="moduleAppView"
            >
              <property name="parameterKeys">
                <map>
                  <entry
                    key="moduleName"
                    value="BUSINESS_APPLICATION_NAME.module.name" />
                  <entry
                    key="businessApplicationName"
                    value="BUSINESS_APPLICATION_NAME" />
                  <entry
                    key="batchJobId"
                    value="BATCH_JOB_ID" />
                </map>
              </property>
            </bean>
            <value>BUSINESS_APPLICATION_NAME_LINK</value>
            <value>WHEN_CREATED</value>
            <value>WHEN_UPDATED</value>
            <value>JOB_STATUS</value>
            <value>NUM_SUBMITTED_REQUESTS</value>
            <value>completedCount</value>
            <value>failedCount</value>
            <value>USER_ID</value>
            <value>adminActions</value>
          </list>
        </entry>

        <entry key="clientList">
          <list>
            <value>BATCH_JOB_ID_CLIENT_LINK</value>
            <value>CLIENT_BUSINESS_APPLICATION_NAME_LINK</value>
            <value>WHEN_CREATED</value>
            <value>WHEN_UPDATED</value>
            <value>JOB_STATUS</value>
            <value>NUM_SUBMITTED_REQUESTS</value>
            <value>completedCount</value>
            <value>failedCount</value>
            <value>clientActions</value>
          </list>
        </entry>
        <entry key="clientAppList">
          <list>
            <value>BATCH_JOB_ID_CLIENT_LINK</value>
            <value>WHEN_CREATED</value>
            <value>WHEN_UPDATED</value>
            <value>JOB_STATUS</value>
            <value>NUM_SUBMITTED_REQUESTS</value>
            <value>completedCount</value>
            <value>failedCount</value>
            <value>clientActions</value>
          </list>
        </entry>
        <entry key="clientView">
          <list>
            <value>BATCH_JOB_ID_CLIENT_LINK</value>
            <value>CLIENT_BUSINESS_APPLICATION_NAME_LINK</value>
            <value>USER_ID</value>
            <value>JOB_STATUS</value>
            <value>jobStatusDate</value>
            <value>businessApplicationParameterMap</value>
            <value>INPUT_DATA_CONTENT_TYPE</value>
            <value>STRUCTURED_INPUT_DATA_URL</value>
            <value>RESULT_DATA_CONTENT_TYPE</value>
            <value>WHEN_CREATED</value>
            <value>WHEN_UPDATED</value>
            <value>LAST_SCHEDULED_TIMESTAMP</value>
            <value>COMPLETED_TIMESTAMP</value>
            <value>expiryDate</value>
            <value>NOTIFICATION_URL</value>
            <value>NUM_SUBMITTED_REQUESTS</value>
            <value>completedRequests</value>
            <value>failedRequests</value>
            <value>GROUP_SIZE</value>
            <value>NUM_SUBMITTED_GROUPS</value>
            <value>completedGroups</value>
            <value>WHO_CREATED</value>
            <value>WHO_UPDATED</value>
            <value>clientActions</value>
          </list>
        </entry>

        <entry key="moduleAppList">
          <list>
            <bean
              class="com.revolsys.ui.html.serializer.key.PageLinkKeySerializer"
              p:name="BATCH_JOB_ID"
              p:label="ID"
              p:pageName="moduleAppView"
            >
              <property name="parameterKeys">
                <map>
                  <entry
                    key="moduleName"
                    value="BUSINESS_APPLICATION_NAME.module.name" />
                  <entry
                    key="businessApplicationName"
                    value="BUSINESS_APPLICATION_NAME" />
                  <entry
                    key="batchJobId"
                    value="BATCH_JOB_ID" />
                </map>
              </property>
            </bean>
            <value>BUSINESS_APPLICATION_NAME_LINK</value>
            <value>WHEN_CREATED</value>
            <value>WHEN_UPDATED</value>
            <value>JOB_STATUS</value>
            <value>NUM_SUBMITTED_REQUESTS</value>
            <value>completedCount</value>
            <value>failedCount</value>
            <value>USER_ID</value>
            <value>adminActions</value>
          </list>
        </entry>
        <entry key="moduleAppView">
          <list>
            <value>BATCH_JOB_ID</value>
            <value>BUSINESS_APPLICATION_NAME_LINK</value>
            <value>USER_ID</value>
            <value>JOB_STATUS</value>
            <value>jobStatusDate</value>
            <value>businessApplicationParameterMap</value>
            <value>INPUT_DATA_CONTENT_TYPE</value>
            <value>STRUCTURED_INPUT_DATA_URL</value>
            <value>RESULT_DATA_CONTENT_TYPE</value>
            <value>WHEN_CREATED</value>
            <value>WHEN_UPDATED</value>
            <value>LAST_SCHEDULED_TIMESTAMP</value>
            <value>COMPLETED_TIMESTAMP</value>
            <value>expiryDate</value>
            <value>NOTIFICATION_URL</value>
            <value>NUM_SUBMITTED_REQUESTS</value>
            <value>completedRequests</value>
            <value>failedRequests</value>
            <value>GROUP_SIZE</value>
            <value>groupsToProcess</value>
            <value>scheduledGroups</value>
            <value>completedGroups</value>
            <value>propertyMap</value>
            <value>WHO_CREATED</value>
            <value>WHO_UPDATED</value>
            <value>adminActions</value>
          </list>
        </entry>
      </map>
    </property>

    <property name="listSortOrder">
      <map>
        <entry key="list">
          <list>
            <list>
              <value type="int">1</value>
              <value>desc</value>
            </list>
          </list>
        </entry>
        <entry key="clientList">
          <list>
            <list>
              <value type="int">0</value>
              <value>desc</value>
            </list>
          </list>
        </entry>
        <entry key="clientAppList">
          <list>
            <list>
              <value type="int">0</value>
              <value>desc</value>
            </list>
          </list>
        </entry>
        <entry key="moduleAppList">
          <list>
            <list>
              <value type="int">1</value>
              <value>desc</value>
            </list>
          </list>
        </entry>
      </map>
    </property>
  </bean>

</beans>
