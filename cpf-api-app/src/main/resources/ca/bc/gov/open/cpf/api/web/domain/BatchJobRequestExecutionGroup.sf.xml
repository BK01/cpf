<?xml version="1.0" encoding="UTF-8"?>
<beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:p="http://www.springframework.org/schema/p"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-4.1.xsd
  "
>

  <bean
    id="ca.bc.gov.open.cpf.api.scheduler.BatchJobRequestExecutionGroup-htmlbuilder"
    class="ca.bc.gov.open.cpf.api.web.builder.BatchJobRequestExecutionGroupUiBuilder"
    p:batchJobService-ref="batchJobService"
  >
    <property name="pages">
      <list>
        <bean
          p:name="workerList"
          class="com.revolsys.ui.web.config.Page"
          p:title="Executing Groups"
          p:path="/admin/workers/{workerId}/executingGroups/"
          p:permission="hasRole('ROLE_ADMIN')" />

        <bean
          p:name="workerRestart"
          class="com.revolsys.ui.web.config.Page"
          p:title="Restart Group"
          p:path="/admin/workers/{workerId}/executingGroups/{executionGroupId}/restart"
          p:permission="hasRole('ROLE_ADMIN')" />
      </list>
    </property>
    <property name="serializers">
      <list>
        <bean
          p:name="module.name"
          class="com.revolsys.ui.html.serializer.key.PageLinkKeySerializer"
          p:label="Module"
          p:pageName="view" />
        <bean
          p:name="businessApplication.name"
          class="com.revolsys.ui.html.serializer.key.PageLinkKeySerializer"
          p:label="BusinessApplication"
          p:pageName="moduleView" />
        <bean
          p:name="scheduleTimestamp"
          class="com.revolsys.ui.html.serializer.key.DateFormatKeySerializer" />
        <bean
          p:name="actions"
          class="com.revolsys.ui.html.serializer.key.MultipleKeySerializer"
        >
          <property name="serializers">
            <list>
              <bean
                class="com.revolsys.ui.html.serializer.key.ActionFormKeySerializer"
                p:name="workerRestart"
                p:label="Restart"
              >
                <property name="parameterNameMap">
                  <map>
                    <entry
                      key="executionGroupId"
                      value="id" />
                  </map>
                </property>
              </bean>
            </list>
          </property>
        </bean>
      </list>
    </property>
    <property name="views">
      <map>
        <entry key="workerList">
          <list>
            <value>id</value>
            <value>module.name</value>
            <value>businessApplication.name</value>
            <value>scheduleTimestamp</value>
            <value>actions</value>
          </list>
        </entry>
      </map>
    </property>
  </bean>
</beans>
