<?xml version="1.0" encoding="UTF-8"?>
<beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:p="http://www.springframework.org/schema/p"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
  "
>

  <bean
    name="/CPF/CPF_BATCH_JOB_REQUESTS-htmlbuilder"
    class="ca.bc.gov.open.cpf.api.web.builder.BatchJobRequestUiBuilder"
    p:dataStore-ref="cpfDataStore"
  >
    <property name="pages">
      <list>
        <bean
          class="com.revolsys.ui.web.config.Page"
          p:name="moduleAppJobList"
          p:title="Batch Job {batchJobId} Requests"
          p:path="/admin/modules/{moduleName}/apps/{businessApplicationName}/jobs/{batchJobId}/requests/" />
        <bean
          class="com.revolsys.ui.web.config.Page"
          p:name="moduleAppJobView"
          p:title="Batch Job {batchJobId} Request {batchJobRequestId}"
          p:path="/admin/modules/{moduleName}/apps/{businessApplicationName}/jobs/{batchJobId}/requests/{batchJobRequestId}/" />
        <bean
          class="com.revolsys.ui.web.config.Page"
          p:name="inputData"
          p:path="/admin/modules/{moduleName}/apps/{businessApplicationName}/jobs/{batchJobId}/requests/{batchJobRequestId}/inputData" />
        <bean
          class="com.revolsys.ui.web.config.Page"
          p:name="resultData"
          p:path="/admin/modules/{moduleName}/apps/{businessApplicationName}/jobs/{batchJobId}/requests/{batchJobRequestId}/resultData" />
      </list>
    </property>

    <property name="serializers">
      <list>
        <bean
          p:name="INPUT_DATA_URL"
          class="com.revolsys.ui.html.serializer.key.UrlKeySerializer" />
        <bean
          p:name="RESULT_DATA_URL"
          class="com.revolsys.ui.html.serializer.key.UrlKeySerializer" />
        <bean
          class="com.revolsys.ui.html.serializer.key.ActionFormKeySerializer"
          p:name="inputData"
          p:label="Input Data Download"
          p:cssClass="ui-auto-button-disk"
          p:target="_top" />
        <bean
          class="com.revolsys.ui.html.serializer.key.ActionFormKeySerializer"
          p:name="resultData"
          p:label="Result Data Download"
          p:cssClass="ui-auto-button-disk"
          p:target="_top"
          p:enabledExpression="#COMPLETED_IND == 1 and #ERROR_CODE == null and (#RESULT_DATA != null or #RESULT_DATA_URL != null)" />
        <bean
          p:name="STARTED_IND"
          class="com.revolsys.ui.html.serializer.key.BooleanImageKeySerializer"
          p:label="Started" />
        <bean
          p:name="COMPLETED_IND"
          class="com.revolsys.ui.html.serializer.key.BooleanImageKeySerializer"
          p:label="Completed" />
        <bean
          p:name="WHO_CREATED"
          p:label="Created By"
          class="com.revolsys.ui.html.serializer.key.StringKeySerializer" />
        <bean
          p:name="WHEN_CREATED"
          p:label="Creation Time"
          class="com.revolsys.ui.html.serializer.key.DateFormatKeySerializer" />
        <bean
          p:name="WHO_CREATED"
          p:label="Modified By"
          class="com.revolsys.ui.html.serializer.key.StringKeySerializer" />
        <bean
          p:name="WHEN_UPDATED"
          p:label="Modification Time"
          class="com.revolsys.ui.html.serializer.key.DateFormatKeySerializer" />
      </list>
    </property>

    <property name="views">
      <map>
        <entry key="moduleAppJobList">
          <list>
            <bean
              p:name="BATCH_JOB_REQUEST_ID"
              class="com.revolsys.ui.html.serializer.key.PageLinkKeySerializer"
              p:label="ID"
              p:pageName="moduleAppJobView" />
            <value>REQUEST_SEQUENCE_NUMBER</value>
            <value>STARTED_IND</value>
            <value>COMPLETED_IND</value>
            <value>ERROR_CODE</value>
            <value>ERROR_MESSAGE</value>
            <value>WHEN_CREATED</value>
          </list>
        </entry>
        <entry key="moduleAppJobView">
          <list>
            <value>BATCH_JOB_REQUEST_ID</value>
            <bean
              class="com.revolsys.ui.html.serializer.key.PageLinkKeySerializer"
              p:name="BATCH_JOB_ID"
              p:label="Batch Job"
              p:pageName="moduleAppView"
              p:uiBuilder-ref="/CPF/CPF_BATCH_JOBS-htmlbuilder" />
            <value>REQUEST_SEQUENCE_NUMBER</value>
            <value>STARTED_IND</value>
            <value>COMPLETED_IND</value>
            <value>ERROR_CODE</value>
            <value>ERROR_MESSAGE</value>
            <value>ERROR_DEBUG_MESSAGE</value>
            <value>inputData</value>
            <value>INPUT_DATA_CONTENT_TYPE</value>
            <value>INPUT_DATA_URL</value>
            <bean
              p:name="BATCH_JOB_RESULT_ID"
              class="com.revolsys.ui.html.serializer.key.PageLinkKeySerializer"
              p:label="Result"
              p:pageName="moduleAppJobView"
              p:uiBuilder-ref="/CPF/CPF_BATCH_JOB_RESULTS-htmlbuilder" />
            <value>resultData</value>
            <value>WHO_CREATED</value>
            <value>WHEN_CREATED</value>
            <value>WHO_UPDATED</value>
            <value>WHEN_UPDATED</value>
          </list>
        </entry>
      </map>
    </property>
  </bean>

</beans>
