<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xml:lang="en"><!-- InstanceBegin template="/Templates/DocTemplate.dwt" codeOutsideHTMLIsLocked="false" -->
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=8,IE=9,IE=10,IE=Edge" />
    
    <!-- InstanceBeginEditable name="doctitle" -->
<title>User Accounts - Administration - CPF</title>
    <script type="text/javascript">
pageId = 'userAccount';
    </script>
<!-- InstanceEndEditable -->

    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/cupertino/jquery-ui.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.datatables.net/plug-ins/9dcbecd42ad/integration/jqueryui/dataTables.jqueryui.css" rel="stylesheet" type="text/css" />
    <link href="../../css/prettify.css" rel="stylesheet" type="text/css" />
    <link href="../../css/rs.css" rel="stylesheet" type="text/css" />
    <link href="../../css/bcgov.css" rel="stylesheet" type="text/css" />
    <link href="../../css/cpf.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/plug-ins/9dcbecd42ad/integration/jqueryui/dataTables.jqueryui.js"></script>
    <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.12.0/jquery.validate.min.js"></script>
    <script type="text/javascript" src="../../js/prettify.js"></script>
    <script type="text/javascript" src="../../js/rs.js"></script>
    <script type="text/javascript">
$(document).ready(function() {
  prettyPrint();
  setPageId(pageId);
  createToc();
});
	</script>

<!-- InstanceBeginEditable name="head" -->
    <style type="text/css">
td > ul {
  margin: 0px;
}
    </style>
<!-- InstanceEndEditable -->
  </head>
  <body>
    <div class="body">
      <div class="header">
        <div class="headerContent">
          <div class="title">
            Concurrent Processing Framework - Developer Guide
           </div>
        </div>
      </div>
      <div class="columns_2_2">
        <div class="columns_2_1">
          <div>
            <div class="column_2_1">
              <div class="sideNav">
                <div class="sideMenu">
                  <div class="title"><a href="http://www.gov.bc.ca/" title="B.C. Home">B.C. Home</a></div>
                  <ul>
                    <li><a href="../../ws/">Home</a></li>
                    <li id="overviewMenu"><a href="../../docs/">Overview</a></li>
                    <li id="clientMenu"><a href="../client/">Client Development</a><ul>
                      <li id="clientRestMenu"><a href="../client/rest-api/">Client REST API</a></li>
                      <li id="clientJavaMenu"><a href="../client/java-api/">Client Java API</a></li>
                     <!-- <li id="clientJavaMenu"><a href="../docs/client/javascript-api/">Client JavaScript API</a></li>-->
                    </ul></li>
                    <li id="pluginMenu"><a href="../plugin/">Plug-in Development</a><ul>
                      <li id="pluginOverviewMenu"><a href="../plugin/overview.html">Plug-in Overview</a></li>
                      <li id="pluginProjectMenu"><a href="../plugin/mavenProject.html">Plug-in Maven Project</a></li>
                      <li id="pluginAppMenu"><a href="../plugin/businessApplication.html">Plug-in Business Application Class</a></li>
                      <li id="pluginCustomizationMenu"><a href="../plugin/customization.html">Plug-in Customization Properties</a></li>
                      <li id="pluginConfigurationMenu"><a href="../plugin/config.html">Plug-in Configuration Properties</a></li>
                      <li id="pluginSecurityMenu"><a href="../plugin/security.html">Plug-in Security</a></li>
                      <li id="pluginTestingMenu"><a href="../plugin/testing.html">Plug-in Testing</a></li>
                      <li id="pluginJavaMenu"><a href="../plugin/java-api/" title="Plug-in Java API">Plug-in Java API</a></li>
                    </ul></li>
                    <li id="installMenu"><a href="../install/">Installation</a><ul>
                      <li id="dbInstallMenu"><a href="../install/database.html">Database Installation</a></li>
                      <li id="webInstallMenu"><a href="../install/webapp.html">Web Application Installation</a></li>
                    </ul></li>
                    <li id="adminMenu"><a href="../admin/">Administration</a><ul>
                      <li id="moduleMenu"><a href="module.html">Modules</a></li>
                      <li id="appMenu"><a href="app.html">Business Applications</a></li>
                      <li id="configPropertyMenu"><a href="configProperty.html">Config Properties</a></li>
                      <li id="userAccountMenu"><a href="userAccount.html">User Accounts</a></li>
                      <li id="userGroupMenu"><a href="userGroup.html">User Groups</a></li>
                      <li id="userGroupPermissionMenu"><a href="userGroupPermission.html">User Group Permissions</a></li>
                      <li id="jobsMenu"><a href="job.html">Batch Jobs</a></li>
                      <li id="statisticsMenu"><a href="statistics.html">Dashboard Statistics</a></li>
                      <li id="workersMenu"><a href="worker.html">Workers</a></li>
                      <li id="logMenu"><a href="log.html">Log Files &amp; Diagnostics</a></li>
                    </ul></li>
                  </ul>
                  </div>
              </div>
            </div>
            <div class="column_2_2">
              <div class="bodyContainer">
                <div class="breadcrumbs">
                    <div class="breadcrumb">
<ul>
<li><a href="../../ws/">HOME</a></li>
<li><a href="../../docs/">Developer Guide</a></li>
<!-- InstanceBeginEditable name="crumbs" -->
<li><a href="index.html">Administration</a></li>
<li>User Accounts</li>
<!-- InstanceEndEditable -->
</ul>
</div>
                  
                </div>
                <div class="bodyContent">
<!-- InstanceBeginEditable name="body" -->
<div class="title">User Accounts - Administration</div>
<section>
<h1 id="overview">Overview</h1>

<p>The CPF maintains a table of user accounts. These user accounts are used to authenticate
(login) access to the CPF web services and admin application. The user accounts are also used
to assign users to user groups.</p>

<p class="note">NOTE: The master and worker for a given user may cache user accounts, user groups
and user group permissions for up to 5 minutes. Wait 5 minutes if the user doesn't have the
correct permissions after a change.</p>

<section>
<h2 id="fields">Fields</h2>

<p>The following table summarizes the fields used for user accounts.<p>

<div class="simpleDataTable">
<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>User Account Id</td>
      <td><p>Unique sequence generated primary key for a user account.</p></td>
    </tr>
    <tr>
      <td>Consumer Key</td>
      <td><p>The unique name for the user account. For CPF user accounts this is their login name.
      For BCGOV the consumer key is the BC Government user type a colon followed by BC Government username (e.g. idir:jdoe).
      The BC Government user types are idir (IDIR internal account), ind (BCEID unverified individual account),
      vin (BCEID verified individual account), and bceid (BCEID business account).</p></td>
    </tr>
    <tr>
      <td>Consumer Secret</td>
      <td><p>The password/signing key for the user. For CPF user accounts this can be modified in the admin application, end users can't change it.
      For BCGOV this is not used and is set to a GUID value.</p></td>
    </tr>
    <tr>
      <td>User Account Class</td>
      <td><p>The class of user account CPF or BCGOV.</p></td>
    </tr>
    <tr>
      <td>User Name</td>
      <td><ul><li>For CPF classes the user name will be kept in-sync with the consumer key.</li>
      <li><p>For BCGOV the user name does not change. It is the GUID of the BC Government user account.
     The BC Government user id can change for a user (e.g. name change) so the GUID is the immutable unique identifier.</li>
      </ul></td>
    </tr>
    <tr>
      <td>Active</td>
      <td><p>Boolean flag indicating if the user is active. Setting to false will prevent the user
      from accessing the CPF.</p></td>
    </tr>
  </tbody>
</table>
</div>
</section>

<section>
<h2 id="user_classes">User Account Classes</h2>

<p>The CPF provides two classes of user account <a href="#user_class_CPF">CPF</a> and <a href="#user_class_BCGOV">BCGOV</a>.</p>
<section>
<h3 id="user_class_CPF">CPF User Account Class</h3>

<p>The CPF user account class is used to authenticate access resource under /pub/cpf/ws/ and /pub/cpf/admin/.
In the BC Government environments users with the CPF class can be created for applications (as opposed
to end users) who are authorized to use the CPF. These applications use these accounts on the server
side to access the CPF. In this case client JavaScript use is not recommended as there is no way to hide
the consumer key or secret from end-users. In non BC Government environments (e.g. development) these
can be used for end-users or developers.</p>

<p>Each CPF user account has a consumer key (User identifier) and consumer secret (Password/signing key).
These are used by the user when authenticating using one of the following two authentication mechanisms.</p>

<ul>
  <li><p><a href="http://tools.ietf.org/html/rfc2617">HTTP Digest Access Authentication</a> - Supported by most web browsers.</p></li>
  <li><p><a href="http://tools.ietf.org/html/rfc5849">OAuth 1.0</a> - Supported by the CPF Java API for direct application access to the CPF.</p></li>
</ul>

<p>The CPF is installed with the following two accounts defined.</p>

<div class="simpleDataTable">
<table>
  <thead>
    <tr>
      <th>Consumer Key</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>cpf_admin</td>
      <td>The initial user account that has access to the CPF admin application. For production
      environments user accounts should be created for each admin user (either CPF or BCGOV).
      Those accounts must be added to the ADMIN user group. Once you have been able to login using
      your own admin account the cpf_admin account should be deactivated.</td>
    </tr>
    <tr>
      <td>cpf_worker</td>
      <td>The user account that the CPF worker processes use to connect to the CPF internal web
      service. The name and password of this account can be changed as long as the worker is
      configured to use the new values. Additional worker user accounts can be added. These
      accounts must be added to the WORKER user group.</td>
    </tr>
  </tbody>
</table>
</div>
</section>

<section>
<h3 id="user_class_CPF">BCGOV (BC Government Siteminder) User Account Class</h3>

<p>The BCGOV user account class is used only for the BC Government environments. These accounts
are used to authenticate accss to /pub/cpf/secure/ws/ and /pub/cpf/secure/admin/. The actual authentication
is performed by the Siteminder agent that redirects the user to the BC Government common login page
if the user is not logged in. The user can login using an internal IDIR account or
an external <a href="www.bceid.ca">BCEID</a> account. The user account records are automatically
created after the user has accessed the CPF for the first time. Therefore to assign a user to a group
to a user they must first access any CPF URL under /pub/cpf/secure/.</p>
</section>
</section>
</section>

<section>
<h1 id="management">User Account Management</h1>

<p>This section describes how to manage user groups and members of those groups.</p>

<p class="note">The user must be in the
ADMIN user group to view the list of all user accounts and to manage user accounts.</p>

<section>
<h2 id="list">User Accounts List</h2>

<p>The user accounts page contains a scrolling table of the user accounts. The contents of this 
table can be filtered by typing at least 3 characters in search box. The table will show user accounts where
the consumer key, user account class or user name contain those characters characters (ignoring case).</p>

<ol>
  <li>Open the <a href="../../admin/">CPF Admin Application</a>.</li>
  <li>Click the <a href="../../admin/userAccounts/">User Accounts</a> menu item.</li>
</ol>
</section>

<section>
<h2 id="view">View User Account</h2>

<p>User accounts can be viewed using the following steps.</p>

<ol>
  <li>Open one of the <a href="list">User Accounts List</a> page.</li>
  <li>Scroll or search for the user account.</li>
  <li>Click the link in the 'Consumer Key' column.</li>
</ol>
</section>

<section>
<h2 id="add">Add User Account</h2>
<p>New user accounts can be added using the following steps. Only accounts with the CPF class can
be added, therefore the User Account Class field is not shown as it is set to CPF. The created
user account's user name field will be set to the consumer key entered.</p>

<ol>
  <li>Open the <a href="#list">User Accounts List</a> page.</li>
  <li>Click 'Add' button.<ol>
  <li>Edit the field values.<ol>
    <li>Enter a Consumer Key.<ul>
      <li>Must be unique across all consumer keys from all classes.</li>
      <li>Can only contain the characters a-z, 0-9, and _.</li>
      <li>Automatically converted to lower case.</li>
    </ul></li>
    <li>Enter a Password. A random UUID password is provided as a default.</li>
    <li>Select if the user is to be active.</li>
  </ol></li>
  <li>Click the 'Save' button to create the user account,
  'Clear Fields' to undo any changes,
  or 'Cancel' to return to the previous page.</li>
</ol>
</section>

<section>
<h2 id="delete">Delete User Account</h2>
<p>A user account can be deleted using the following steps. This will also remove the user
account from any user group and delete the user's jobs. For the CPF class deleting accounts is permanent. For BCGOV class this
deletes the record, but a new record will be created when the user next accesses CPF.</p>

<ol>
  <li>Open the <a href="#list">User Accounts List</a> or <a href="#view">View User Account</a> page.</li>
  <li>Click trash button in the 'Actions' field for the user account to delete.</li>
  <li>Click the 'OK' button on the confirm delete dialog to delete the user account, or 'Cancel' to return to the page.</li>
</ol>
</section>

<section>
<h2 id="edit">Edit User Account</h2>
<p>User accounts can be edited using the following steps.
For the CPF class the consumer key, consumer secret and active flag can be edited.
For the BCGOV class only the active flag can be edited.</p>

<ol>
  <li>Open the <a href="#view">View User Account</a> page.</li>
  <li>Click the 'Edit button'.</li>
  <li>Edit the field values.<ol>
    <li>Enter a Consumer Key.<ul>
      <li>Must be unique across all consumer keys from all classes.</li>
      <li>Can only contain the characters a-z, 0-9, and _.</li>
      <li>Automatically converted to lower case.</li>
    </ul></li>
    <li>Enter a Password.</li>
    <li>Select if the user is to be active.</li>
  </ol></li>
  <li>Click the 'Save' button to save changes, 'Revert to Saved' to undo any changes, or 'Cancel' to return to previous page.</li>
</ol>
</section>
</section>
										<!-- InstanceEndEditable -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="footer">
        <div class="title">Concurrent Processing Framework (v ${project.version})</div>
        <div class="footerMenu">
          <ul>
            <li><a href="http://www2.gov.bc.ca/gov/admin/copyright.page" title="COPYRIGHT">COPYRIGHT</a></li>
            <li><a href="http://www2.gov.bc.ca/gov/admin/disclaimer.page" title="DISCLAIMER">DISCLAIMER</a></li>
            <li><a href="http://www2.gov.bc.ca/gov/admin/privacy.page" title="PRIVACY">PRIVACY</a></li>
            <li><a href="http://www2.gov.bc.ca/gov/admin/accessibility.page" title="ACCESSIBILITY">ACCESSIBILITY</a></li>
          </ul>
        </div>
      </div>
    </div>
  </body>
<!-- InstanceEnd --></html>
