<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xml:lang="en"><!-- InstanceBegin template="/Templates/DocTemplate.dwt" codeOutsideHTMLIsLocked="false" -->
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=8,IE=9,IE=10,IE=Edge" />
    
    <!-- InstanceBeginEditable name="doctitle" -->
<title>Config Properties - Administration - CPF</title>
    <script type="text/javascript">
pageId = 'configProperty';
    </script>
<!-- InstanceEndEditable -->

    <link
      href="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables_themeroller.css"
      rel="stylesheet" type="text/css" />
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/cupertino/jquery-ui.css"
      rel="stylesheet" type="text/css" />
    <link href="../../css/prettify.css" rel="stylesheet" type="text/css" />
    <link href="../../css/rs.css" rel="stylesheet" type="text/css" />
    <link href="../../css/bcgov.css" rel="stylesheet" type="text/css" />
    <link href="../../css/cpf.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
    <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.12.0/jquery.validate.min.js"></script>
    <script type="text/javascript" src="../../js/prettify.js"></script>
    <script type="text/javascript" src="../../js/rs.js"></script>
    <script type="text/javascript">
$(document).ready(function() {
  prettyPrint();
  setPageId(pageId);
  createToc();
});
	</script>

<!-- InstanceBeginEditable name="head" -->
    <style type="text/css">
td > ul {
  margin: 0px;
}
    </style>
<!-- InstanceEndEditable -->
  </head>
  <body>
    <div class="body">
      <div class="header">
        <div class="headerContent">
          <div class="title">
            Cloud Processing Framework - Developer Guide
           </div>
        </div>
      </div>
      <div class="columns_2_2">
        <div class="columns_2_1">
          <div>
            <div class="column_2_1">
              <div class="sideNav">
                <div class="sideMenu">
                  <div class="title"><a href="http://www.gov.bc.ca/" title="B.C. Home">B.C. Home</a></div>
                  <ul>
                    <li><a href="../../ws/">Home</a></li>
                    <li id="overviewMenu"><a href="../../docs/">Overview</a></li>
                    <li id="clientMenu"><a href="../client/">Client Development</a><ul>
                      <li id="clientRestMenu"><a href="../client/rest-api/">Client REST API</a></li>
                      <li id="clientJavaMenu"><a href="../client/java-api/">Client Java API</a></li>
                     <!-- <li id="clientJavaMenu"><a href="../docs/client/javascript-api/">Client JavaScript API</a></li>-->
                    </ul></li>
                    <li id="pluginMenu"><a href="../plugin/">Plug-in Development</a><ul>
                      <li id="pluginOverviewMenu"><a href="../plugin/overview.html">Plug-in Overview</a></li>
                      <li id="pluginProjectMenu"><a href="../plugin/mavenProject.html">Plug-in Maven Project</a></li>
                      <li id="pluginAppMenu"><a href="../plugin/businessApplication.html">Plug-in Business Application Class</a></li>
                      <li id="pluginCustomizationMenu"><a href="../plugin/customization.html">Plug-in Customization Properties</a></li>
                      <li id="pluginConfigurationMenu"><a href="../plugin/config.html">Plug-in Configuration Properties</a></li>
                      <li id="pluginSecurityMenu"><a href="../plugin/security.html">Plug-in Security</a></li>
                      <li id="pluginTestingMenu"><a href="../plugin/testing.html">Plug-in Testing</a></li>
                      <li id="pluginJavaMenu"><a href="../plugin/java-api/" title="Plug-in Java API">Plug-in Java API</a></li>
                    </ul></li>
                    <li id="installMenu"><a href="../install/">Installation</a><ul>
                      <li id="dbInstallMenu"><a href="../install/database.html">Database Installation</a></li>
                      <li id="webInstallMenu"><a href="../install/webapp.html">Web Application Installation</a></li>
                    </ul></li>
                    <li id="adminMenu"><a href="../admin/">Administration</a><ul>
                      <li id="moduleMenu"><a href="module.html">Modules</a></li>
                      <li id="appMenu"><a href="app.html">Business Applications</a></li>
                      <li id="configPropertyMenu"><a href="configProperty.html">Config Properties</a></li>
                      <li id="userAccountMenu"><a href="userAccount.html">User Accounts</a></li>
                      <li id="userGroupMenu"><a href="userGroup.html">User Groups</a></li>
                      <li id="userGroupPermissionMenu"><a href="userGroupPermission.html">User Group Permissions</a></li>
                      <li id="jobsMenu"><a href="job.html">Batch Jobs</a></li>
                      <li id="statisticsMenu"><a href="statistics.html">Dashboard Statistics</a></li>
                      <li id="workersMenu"><a href="worker.html">Workers</a></li>
                      <li id="logMenu"><a href="log.html">Log Files &amp; Diagnostics</a></li>
                    </ul></li>
                  </ul>
                  </div>
              </div>
            </div>
            <div class="column_2_2">
              <div class="bodyContainer">
                <div class="breadcrumbs">
                    <div class="breadcrumb">
<ul>
<li><a href="../../ws/">HOME</a></li>
<li><a href="../../docs/">Developer Guide</a></li>
<!-- InstanceBeginEditable name="crumbs" -->
<li><a href="index.html">Administration</a></li>
<li>Config Properties</li>
<!-- InstanceEndEditable -->
</ul>
</div>
                  
                </div>
                <div class="bodyContent">
<!-- InstanceBeginEditable name="body" -->
<div class="title">Config Properties - Administration</div>
<section>
<h1 id="overview">Overview</h1>

<p>The CPF master web application, CPF workers and modules can be configured by setting config
properties.</p>

<section>
<h2 id="fields">Fields</h2>

<p>The following table summarizes the fields used for config properties.<p>

<div class="simpleDataTable">
<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Config Property Id</td>
      <td>Unique sequence generated primary key for a config property.</td>
    </tr>
    <tr>
      <td>Environment Name</td>
      <td>The <a href="#environmentName">environment name</a> the config property will be used for.</td>
    </tr>
    <tr>
      <td>Module Name</td>
      <td>The name of the module the config property applies to. The special module names CPF
      and CPF_WORKER are used for CPF config properties.</td>
    </tr>
    <tr>
      <td>Property Name</td>
      <td>The name of the property.</td>
    </tr>
    <tr>
      <td>Value</td>
      <td>The value of the property.</td>
    </tr>
    <tr>
      <td>Value Type</td>
      <td><p>The <a href="#dataType">data type</a> the value will be converted to.</p>
   </td>
    </tr>
  </tbody>
</table>
</div>
</section>

<section>
<h2 id="environmentName">Environment Name</h2>
<p>The configuration properties support the concept of having different configuration properties
for different environments. Environment names are currently only used for workers.</p>

<p>The special 'default' environment name is used as a default value if a config property is not
created for an environment.</p>

<p>For example the system could have two worker servers. The first has 2 CPUs and the second has 4.
The first can support 32 threads and the second 64 threads. Two environment names 2cpu and 4cpu
could be created. The first worker's environment name would be set to 2cpu and the second 4cpu.
A config property can be created for the property name cpfWorker.maximumPoolSize for each environment
with the values 32 and 64 respectively.</p>
</section>

<section>
<h2 id="dataType">Data Types</h2>
  <div class="simpleDataTable">
  <table>
    <thead>
      <th>Type</th>
      <th>Description</th>
    </thead>
    <tbody>
      <tr>
        <td><code>string</code></td>
        <td>String</td>
      </tr>
      <tr>
        <td><code>boolean</code></td>
        <td>Boolean</td>
      </tr>
      <tr>
        <td><code>long</code></td>
        <td>Long</td>
      </tr>
      <tr>
        <td><code>int</code></td>
        <td>Int</td>
      </tr>
      <tr>
        <td><code>double</code></td>
        <td>Double</td>
      </tr>
      <tr>
        <td><code>float</code></td>
        <td>Float</td>
      </tr>
      <tr>
        <td><code>short</code></td>
        <td>Short</td>
      </tr>
      <tr>
        <td><code>byte</code></td>
        <td>Byte</td>
      </tr>
      <tr>
        <td><code>decimal</code></td>
        <td>Big Decimal</td>
      </tr>
      <tr>
        <td><code>integer</code></td>
        <td>Big Integer</td>
      </tr>
      <tr>
        <td><code>QName</code></td>
        <td>Qualified name</td>
      </tr>
      <tr>
        <td><code>anyURI</code></td>
        <td>URI</td>
      </tr>
      <tr>
        <td><code>date</code></td>
        <td>Date (YYYY-MM-DD)</td>
      </tr>
      <tr>
        <td><code>dateTime</code></td>
        <td>Date + Time (YYYY-MM-DDTHH:MM:SS)</td>
      </tr>
      <tr>
        <td><code>Geometry</code></td>
        <td>WKT Geometry</td>
      </tr>
      <tr>
        <td><code>Point</code></td>
        <td>WKT Point</td>
      </tr>
      <tr>
        <td><code>LineString</code></td>
        <td>WKT LineString</td>
      </tr>
      <tr>
        <td><code>Polygon</code></td>
        <td>WKT Polygon</td>
      </tr>
      <tr>
        <td><code>GeometryCollection</code></td>
        <td>WKT Geometry Collection</td>
      </tr>
      <tr>
        <td><code>MultiPoint</code></td>
        <td>WKT Multi-Point</td>
      </tr>
      <tr>
        <td><code>MultiLineString</code></td>
        <td>WKT Multi-LineString</td>
      </tr>
      <tr>
        <td><code>MultiPolygon</code></td>
        <td>WKT Multi-Polygon</td>
      </tr>
    </tbody>
  </table>
</div>
</section>
</section>

<section>
<h1 id="management">Config Property Management</h1>

<p>This section describes how to manage config properties.</p>

<section>
<h2 id="list">Config Properties List</h2>

<p>The config properties page contains a scrolling table of the config properties. The contents of this 
table can be filtered by typing at least 3 characters in search box. The table will show config properties where
the environment name, module name, property name, or property value contain those characters characters (ignoring case).</p>

<section>
<h3 id="globalList">CPF Config Properties</h3>

<p>The list of configuration properties for the <a href="#cpfProperties">CPF master web application</a> and
<a href="#cpfWorkerProperties">CPF workers</a> can be viewed using
the following steps.</p>

<p class="note">The user must be in the ADMIN user group.</p>

<ol>
  <li>Open the <a href="../../admin/">CPF Admin Application</a>.</li>
  <li>Click the <a href="../../admin/configProperties/">Config Properties</a> menu item.</li>
</ol>

</section>

<section>
<h3 id="moduleList">Module Config Properties</h3>

<p>The list of configuration properties for a module can be viewed using the following steps.</p>

<p class="note">The user must be in the ADMIN, or ADMIN_MODULE_[MODULE_NAME]_ADMIN groups.</p>

<p class="note">NOTE: Consult the module's readme file for details on the supported
configuration properties.</p>

<ol>
  <li>Open the <a href="module.html#view">Module View</a> page.</li>
  <li>Click the 'Config Properties' tab.</li>
</ol>
</section>

<section>
<h3 id="appList">Business Application Config Properties</h3>

<p>The list of configuration properties for a business application can be viewed using the following steps.</p>

<p class="note">The user must be in the ADMIN, or ADMIN_MODULE_[MODULE_NAME]_ADMIN groups.</p>

<p class="note">NOTE: Consult the module's readme file for details on the supported
configuration properties for a business application.</p>

<ol>
  <li>Open the <a href="businessApplication.html#view">Business Application View</a> page.</li>
  <li>Click the 'Config Properties' tab.</li>
</ol>
</section>

</section>

<section>
<h2 id="view">View Config Property</h2>

<p>Config properties can be viewed using the following steps.</p>

<ol>
  <li>Open one of the <a href="list">Config Properties List</a> page.</li>
  <li>Scroll or search for the config property.</li>
  <li>Click the link in the 'Consumer Key' column.</li>
</ol>
</section>

<section>
<h2 id="add">Add Config Property</h2>
<p>New config properties can be added using the following steps. Only accounts with the CPF class can
be added, therefore the Config Property Class field is not shown as it is set to CPF. The created
config property's user name field will be set to the consumer key entered.</p>

<ol>
  <li>Open one of the <a href="#list">Config Properties List</a> page.</li>
  <li>Click 'Add' button.<ol>
  <li>Edit the field values.</li>
  <li>Click the 'Save' button to create the config property,
  'Clear Fields' to undo any changes,
  or 'Cancel' to return to the previous page.</li>
</ol>
</section>

<section>
<h2 id="delete">Delete Config Property</h2>
<p>A config property can be deleted using the following steps.</p>

<ol>
  <li>Open one of the <a href="#list">Config Properties List</a> or <a href="#view">View Config Property</a> page.</li>
  <li>Click trash button in the 'Actions' field for the config property to delete.</li>
  <li>Click the 'OK' button on the confirm delete dialog to delete the config property, or 'Cancel' to return to the page.</li>
</ol>
</section>

<section>
<h2 id="edit">Edit Config Property</h2>
<p>Config properties can be edited using the following steps.
For the CPF class the consumer key, consumer secret and active flag can be edited.
For the BCGOV class only the active flag can be edited.</p>

<ol>
  <li>Open the <a href="#view">View Config Property</a> page.</li>
  <li>Click the 'Edit button'.</li>
  <li>Edit the field values.</li>
  <li>Click the 'Save' button to save changes, 'Revert to Saved' to undo any changes, or 'Cancel' to return to previous page.</li>
</ol>
</section>
</section>
<section>
  <h1 id="properties">Property Names &amp; Descriptions</h1>

  <p>This section describes the configuration properties used for the CPF master web application and CPF workers.</p>
  
  <p>The CPF uses <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#load(java.io.Reader)">Java Properties</a> files
  for bootstrap configuration of the CPF master web application and CPF workers. In the properties
  files use '=' not ':' between the keys and values and escape any ':' characters in property values using '\:'.
  Properties with a tick in the 'Admin App' column can also be defined using the admin application.</p>
  
  <p class="note">NOTE: Any changes to config properties using the admin application or in the 
  properties file will require the CPF master or CPF worker to be restarted for these properties to take affect.</p>
  
<section>
<h2 id="cpfProperties">CPF Configuration Properties</h2>
<p>The CPF master web application requires the following properties to be defined in the
<code>/apps/config/cpf.properties</code> file.
The master will ignore any other properties in this file. So where the master and worker are on
the same machine they can share the same configuration file.</p>

<div class="simpleDataTable">
<table>
  <thead>
    <tr>
      <th>Property Name</th>
      <th>Description</th>
      <th>Admin App</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ca.bc.gov.cpf.app.baseUrl</code></td>
      <td>The HTTP URL to the OAuth/Digest secured CPF web services, including context path on the server cpf is deployed to. The trailing / must be omitted.</td>
      <td><img src="../../images/cross.png" alt="No" title="No" /></td>
      <td><a href="http://apps.gov.bc.ca/pub/cpf">http://apps.gov.bc.ca/pub/cpf</a></td>
    </tr>
    <tr>
      <td><code>ca.bc.gov.cpf.app.secureBaseUrl</code></td>
      <td>The HTTPS URL to the Siteminder secured CPF web services, including context path on the server cpf is deployed to. The trailing / must be omitted.</td>
      <td><img src="../../images/cross.png" alt="No" title="No" /></td>
      <td><a href="https://apps.gov.bc.ca/pub/cpf/secure">https://apps.gov.bc.ca/pub/cpf/secure</a></td>
    </tr>
    <tr>
      <td><code>cpfSiteminderLogoutSuccess.logoutUrl</code></td>
      <td>The URL to the siteminder logoff page.</td>
      <td><img src="../../images/cross.png" alt="No" title="No" /></td>
      <td><a href="https://logon.gov.bc.ca/clp-cgi/logoff.cgi">https://logon.gov.bc.ca/clp-cgi/logoff.cgi</a> or
      <a href="https://logontest.gov.bc.ca/clp-cgi/logoff.cgi">https://logontest.gov.bc.ca/clp-cgi/logoff.cgi</a></td>
     </tr>
    <tr>
      <td><code>ca.bc.gov.cpf.db.url</code></td>
      <td>The JDBC URL to the cpf database.</td>
      <td><img src="../../images/cross.png" alt="No" title="No" /></td>
      <td><code>jdbc:oracle:thin:@localhost:1521:cpf</code> or <code>jdbc\:postgresql\://localhost\:5432/cpf</code></td>
    </tr>
    <tr>
      <td><code>ca.bc.gov.cpf.db.password</code></td>
      <td>The password for the PROXY_CPF_WEB user account.</td>
      <td><img src="../../images/cross.png" alt="No" title="No" /></td>
      <td>cpf_2009</td>
    </tr>
    <tr>
      <td><code>ca.bc.gov.cpf.db.maxConnections</code></td>
      <td>The maximum number of database connections.</td>
      <td><img src="../../images/cross.png" alt="No" title="No" /></td>
      <td>50</td>
    </tr>
    <tr>
      <td id="repositoryServer"><code>ca.bc.gov.cpf.repositoryServer</code></td>
      <td>The maven repository to download plugins from.</td>
      <td><img src="../../images/cross.png" alt="No" title="No" /></td>
      <td>TODO</td>
    </tr>
    <tr>
      <td id="repositoryDirectory"><code>ca.bc.gov.cpf.repositoryDirectory</code></td>
      <td>The cache directory to store maven artifacts.</td>
      <td><img src="../../images/cross.png" alt="No" title="No" /></td>
      <td>TODO</td>
    </tr>
    <tr>
      <td><code>batchJobService.maxWorkerWaitTime</code></td>
      <td>The maximum time (in seconds) the worker will wait in a HTTP request for group to process before
      trying a new HTTP request. This limits the number of polling requests to the server. Must
      be less than any HTTP server inactivity timeouts.</td>
      <td><img src="../../images/tick.png" alt="Yes" title="Yes" /></td>
      <td>100</td>
    </tr>
    <tr>
      <td><code>batchJobService.fromEmail</code></td>
      <td>The email address any emails will be sent from.</td>
      <td><img src="../../images/tick.png" alt="Yes" title="Yes" /></td>
      <td>cpf@localhost</td>
    </tr>
    <tr>
      <td><code>mailSender.host</code></td>
      <td>The mail server to send emails via./td>
      <td><img src="../../images/tick.png" alt="Yes" title="Yes" /></td>
      <td>localhost</td>
    </tr>
    <tr>
      <td>removeOldBatchJobs.daysToKeepOldJobs</td>
      <td>The number of days that jobs will be kept after the results have been created. After
      that time the jobs will be removed in the next daily cleanup.</td>
      <td><img src="../../images/tick.png" alt="Yes" title="Yes" /></td>
      <td>7</td>
    </tr>
  </tbody>
</table>
</div>
</section>

<section>
<h2 id="cpfWorkerProperties">Worker Configuration Properties</h2>
<p>The CPF worker web application requires the following properties to be defined in the
<code>/apps/config/cpf.properties</code> file.
The worker will ignore any other properties in this file. So where the worker and master are on
the same machine they can share the same configuration file.</p>

<div class="simpleDataTable">
<table>
  <thead>
    <tr>
      <th>Property Name</th>
      <th>Description</th>
      <th>Admin App</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ca.bc.gov.cpf.internal.webServiceUrl</code></td>
      <td>The HTTP URL to the CPF web services behind any reverse proxies. This is used to speed up
      access from the workers.</td>
      <td><img src="../../images/cross.png" alt="No" title="No" /></td>
      <td><a href="http://localhost/pub/cpf">http://localhost/pub/cpf</a></td>
    </tr>
    <tr>
      <td><code>cpfWorker.password</code></td>
      <td>The password for the cpf_worker user account.</td>
     <td><img src="../../images/cross.png" alt="No" title="No" /></td>
       <td>w0rk3r</td>
    </tr>
    <tr>
      <td><code>cpfWorker.environmentName</code></td>
      <td>The <a href="#environmentName">environment name</a> used for the worker.</td>
      <td><img src="../../images/cross.png" alt="No" title="No" /></td>
      <td>default</td>
    </tr>
    <tr>
      <td id="workerPoolSize"><code>cpfWorker.maximumPoolSize</code></td>
      <td>The maximum number of threads on the worker used to execute requests.</td>
      <td><img src="../../images/tick.png" alt="Yes" title="Yes" /></td>
      <td>32</td>
    </tr>
  </tbody>
</table>
</div>
</section>
</section>
										<!-- InstanceEndEditable -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="footer">
        <div class="title">Cloud Processing Framework (v ${project.version})</div>
        <div class="footerMenu">
          <ul>
            <li><a href="http://www2.gov.bc.ca/gov/admin/copyright.page" title="COPYRIGHT">COPYRIGHT</a></li>
            <li><a href="http://www2.gov.bc.ca/gov/admin/disclaimer.page" title="DISCLAIMER">DISCLAIMER</a></li>
            <li><a href="http://www2.gov.bc.ca/gov/admin/privacy.page" title="PRIVACY">PRIVACY</a></li>
            <li><a href="http://www2.gov.bc.ca/gov/admin/accessibility.page" title="ACCESSIBILITY">ACCESSIBILITY</a></li>
          </ul>
        </div>
      </div>
    </div>
  </body>
<!-- InstanceEnd --></html>
