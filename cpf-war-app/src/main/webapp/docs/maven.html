<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xml:lang="en"><!-- InstanceBegin template="/Templates/DocTemplate.dwt" codeOutsideHTMLIsLocked="false" -->
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=8,IE=9,IE=10,IE=Edge" />
    
    <!-- InstanceBeginEditable name="doctitle" -->
<title>Maven - CPF</title>
    <script type="text/javascript">
pageId = '';
    </script>
<!-- InstanceEndEditable -->

    <link
      href="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables_themeroller.css"
      rel="stylesheet" type="text/css" />
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/themes/cupertino/jquery-ui.css"
      rel="stylesheet" type="text/css" />
    <link href="../css/prettify.css" rel="stylesheet" type="text/css" />
    <link href="../css/rs.css" rel="stylesheet" type="text/css" />
    <link href="../css/bcgov.css" rel="stylesheet" type="text/css" />
    <link href="../css/cpf.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
    <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.12.0/jquery.validate.min.js"></script>
    <script type="text/javascript" src="../js/prettify.js"></script>
    <script type="text/javascript" src="../js/rs.js"></script>
    <script type="text/javascript">
$(document).ready(function() {
  prettyPrint();
  setPageId(pageId);
  createToc();
});
	</script>

<!-- InstanceBeginEditable name="head" -->
    <style type="text/css">
td > ul {
  margin: 0px;
}
    </style>
<!-- InstanceEndEditable -->
  </head>
  <body>
    <div class="body">
      <div class="header">
        <div class="headerContent">
          <div class="title">
            Cloud Processing Framework - Developer Guide
           </div>
        </div>
      </div>
      <div class="columns_2_2">
        <div class="columns_2_1">
          <div>
            <div class="column_2_1">
              <div class="sideNav">
                <div class="sideMenu">
                  <div class="title"><a href="http://www.gov.bc.ca/" title="B.C. Home">B.C. Home</a></div>
                  <ul>
                    <li><a href="../ws/">Home</a></li>
                    <li id="overviewMenu"><a href="../docs/">Overview</a></li>
                    <li id="clientMenu"><a href="client/">Client Development</a><ul>
                      <li id="clientRestMenu"><a href="client/rest-api/">Client REST API</a></li>
                      <li id="clientJavaMenu"><a href="client/java-api/">Client Java API</a></li>
                     <!-- <li id="clientJavaMenu"><a href="../docs/client/javascript-api/">Client JavaScript API</a></li>-->
                    </ul></li>
                    <li id="pluginMenu"><a href="plugin/">Plug-in Development</a><ul>
                      <li id="pluginOverviewMenu"><a href="plugin/overview.html">Plug-in Overview</a></li>
                      <li id="pluginProjectMenu"><a href="plugin/mavenProject.html">Plug-in Maven Project</a></li>
                      <li id="pluginAppMenu"><a href="plugin/businessApplication.html">Plug-in Business Application Class</a></li>
                      <li id="pluginCustomizationMenu"><a href="plugin/customization.html">Plug-in Customization Properties</a></li>
                      <li id="pluginConfigurationMenu"><a href="plugin/config.html">Plug-in Configuration Properties</a></li>
                      <li id="pluginSecurityMenu"><a href="plugin/security.html">Plug-in Security</a></li>
                      <li id="pluginTestingMenu"><a href="plugin/testing.html">Plug-in Testing</a></li>
                      <li id="pluginJavaMenu"><a href="plugin/java-api/" title="Plug-in Java API">Plug-in Java API</a></li>
                    </ul></li>
                    <li id="installMenu"><a href="install/">Installation</a><ul>
                      <li id="dbInstallMenu"><a href="install/database.html">Database Installation</a></li>
                      <li id="webInstallMenu"><a href="install/webapp.html">Web Application Installation</a></li>
                    </ul></li>
                    <li id="adminMenu"><a href="admin/">Administration</a><ul>
                      <li id="moduleMenu"><a href="admin/module.html">Modules</a></li>
                      <li id="appMenu"><a href="admin/app.html">Business Applications</a></li>
                      <li id="configPropertyMenu"><a href="admin/configProperty.html">Config Properties</a></li>
                      <li id="userAccountMenu"><a href="admin/userAccount.html">User Accounts</a></li>
                      <li id="userGroupMenu"><a href="admin/userGroup.html">User Groups</a></li>
                      <li id="userGroupPermissionMenu"><a href="admin/userGroupPermission.html">User Group Permissions</a></li>
                      <li id="jobsMenu"><a href="admin/job.html">Batch Jobs</a></li>
                      <li id="statisticsMenu"><a href="admin/statistics.html">Dashboard Statistics</a></li>
                      <li id="workersMenu"><a href="admin/worker.html">Workers</a></li>
                      <li id="logMenu"><a href="admin/log.html">Log Files &amp; Diagnostics</a></li>
                    </ul></li>
                  </ul>
                  </div>
              </div>
            </div>
            <div class="column_2_2">
              <div class="bodyContainer">
                <div class="breadcrumbs">
                    <div class="breadcrumb">
<ul>
<li><a href="../ws/">HOME</a></li>
<li><a href="../docs/">Developer Guide</a></li>
<!-- InstanceBeginEditable name="crumbs" -->
<li>Maven</li>
<!-- InstanceEndEditable -->
</ul>
</div>
                  
                </div>
                <div class="bodyContent">
<!-- InstanceBeginEditable name="body" -->
<h1>Maven</h1>

<p>The CPF is developed using the Apache Maven build tool. All CPF plug-ins must be developed using Maven as it manages the dependencies between the CPF components and external libraries. Developers must have an understanding of developing applications using Maven.</p>

<p>Maven 3.0.x is required and can be downloaded from the following sites.</p>

<ul>
  <li><a href="http://maven.apache.org/">Command line tools</a></li>
  <li><a href="http://eclipse.org/m2e/">Eclipse Maven plug-in</a></li>
</ul>

<p>See <a href="http://www.sonatype.com/books/mvnref-book/reference/">Maven: The Complete Reference</a> for details on developing with Maven.</p>

<p>The CPF libraries are deployed to the CITZ BC Government Maven repository. Follow instructions Appendex A.1 Maven settings.xml to use this repository to download the CPF libraries.  NOTE: This step must be completed before continuing with these instructions.

 
<h2>Maven Settings</h2>

<p>The CPF is available from the CITZ BC Government Maven repository inside the BC Government network/VPN.</p>
 
<p>In addition to the jar files the repository includes the javadoc files for each library. These can be downloaded using your IDE to provide help on the various classes and methods.</p>

<p class="note">NOTE: To use the CITZ BC Government Maven Repository you must either be within the BC Government network or use a BC Government VPN connection.</p>

  
<p>The following example Maven settings.xml adds a new profile that include references to the CITZ BC Government Maven Repository. Copy the following file to ~/.m2/settings.xml (or merge if the file already exists) to enable Maven to download the libraries from these locations.</p>

<figure>
  <figcaption>~/.m2/maven.settings</figcaption>
<pre class="prettyprint language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;settings
  xmlns=&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;
    http://maven.apache.org/SETTINGS/1.0.0
    http://maven.apache.org/xsd/settings-1.0.0.xsd
  &quot;
&gt;
  &lt;profiles&gt;
    &lt;profile&gt;
      &lt;id&gt;citz-artifactory&lt;/id&gt;
      &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
      &lt;/activation&gt;
      &lt;repositories&gt;
        &lt;repository&gt;
          &lt;id&gt;delivery.bcgov&lt;/id&gt;
          &lt;name&gt;BC Government Repository&lt;/name&gt;
          &lt;url&gt;http://delivery.apps.bcgov/artifactory/repo&lt;/url&gt;
          &lt;releases&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
            &lt;updatePolicy&gt;never&lt;/updatePolicy&gt;
            &lt;checksumPolicy&gt;warn&lt;/checksumPolicy&gt;
          &lt;/releases&gt;
          &lt;snapshots&gt;
            &lt;enabled&gt;true&lt;/enabled&gt;
            &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;
            &lt;checksumPolicy&gt;warn&lt;/checksumPolicy&gt;
          &lt;/snapshots&gt;
        &lt;/repository&gt;
      &lt;/repositories&gt;
    &lt;/profile&gt;
  &lt;/profiles&gt;
&lt;/settings&gt;</pre>
</figure>

<h2>CPF Client API Dependencies</h2>

<p>The following code example shows how to include a dependency to the CPF client API.<p>

<figure>
<pre class="prettyprint language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project
  xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"
&gt;
  
  &lt;dependencies&gt;
    &lt;dependency&gt;
    &lt;groupId&gt;ca.bc.gov.open.cpf&lt;/groupId&gt;
    &lt;artifactId&gt;cpf-api-client&lt;/artifactId&gt;
    &lt;version&gt;${ca.bc.gov.open.cpf.version}&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
  
  &lt;properties&gt;
    &lt;ca.bc.gov.open.cpf.version&gt;${project.version}&lt;/ca.bc.gov.open.cpf.version&gt;
  &lt;/properties&gt;
&lt;/project&gt;</pre>
</figure>

<p class="note">NOTE: A property is used to define the CPF version. In delivery the -SNAPSHOT suffix might be appended to the version to indicate that the most recent development snapshot is to be used. This is required if a new feature of the CPF client API is required that has not yet been deployed to production. In test a .RC* suffix might be used for a release candidate.</p>

<p>Before migration to the production environment the dependency to the CPF client must be updated to use the release version . This must be clearly documented in the application readme file. It is the developer's responsibility to ensure that the -SNAPSHOT or .RC* version is not used in production.</p>

<p>Include the following in the Perform Release of the README.txt for each version property. Replace the text <b>VERSION</b> with the version without the -SNAPSHOT or .RC* suffix.</p>
  
<p>Update property dependencies to latest RC or release version:</p>

<figure>
  <pre class="prettyprint">ca.bc.gov.open.cpf.version: <b>VERSION</b>+</pre>
</figure>

<p>Include the following in the pom.xml for each version property. Replace the text<b>VERSION</b> with the version without the -SNAPSHOT or .RC* suffix.</p>

<figure>
<pre class="prettyprint language-xml">  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
        &lt;artifactId&gt;versions-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.3.1&lt;/version&gt;
        &lt;configuration&gt;
          &lt;properties&gt;
            &lt;property&gt;
              &lt;name&gt;ca.bc.gov.open.cpf.version&lt;/name&gt;
              &lt;version&gt;[<b>VERSION</b>,),[<b>VERSION</b>.RC,)&lt;/version&gt;
            &lt;/property&gt;
          &lt;/properties&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;</pre>
</figure>

<p>The BC Government deploy process uses the <a href="http://mojo.codehaus.org/versions-maven-plugin/update-properties-mojo.html">CodeHaus Versions Maven Plugin</a> to update the -SNAPSHOT dependency to the production version.</p>
  
<figure>
  <pre class="prettyprint">mvn org.codehaus.mojo:versions-maven-plugin:2.0:use-releases -DgenerateBackupPoms=false</pre>
</figure>

<!-- InstanceEndEditable -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="footer">
        <div class="title">Cloud Processing Framework (v ${project.version})</div>
        <div class="footerMenu">
          <ul>
            <li><a href="http://www2.gov.bc.ca/gov/admin/copyright.page" title="COPYRIGHT">COPYRIGHT</a></li>
            <li><a href="http://www2.gov.bc.ca/gov/admin/disclaimer.page" title="DISCLAIMER">DISCLAIMER</a></li>
            <li><a href="http://www2.gov.bc.ca/gov/admin/privacy.page" title="PRIVACY">PRIVACY</a></li>
            <li><a href="http://www2.gov.bc.ca/gov/admin/accessibility.page" title="ACCESSIBILITY">ACCESSIBILITY</a></li>
          </ul>
        </div>
      </div>
    </div>
  </body>
<!-- InstanceEnd --></html>
