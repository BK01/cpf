
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2015-Mar-11
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Concurrent Processing Framework &#x2013; Configuration</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/flatly/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="..//css/bootswatch.css" rel="stylesheet" />
		<link href="..//css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/default.min.css" rel="stylesheet" />

		<link href="..//css/lightbox.css" rel="stylesheet" />

		<link href="..//css/site.css" rel="stylesheet" />
		<link href="..//css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->



	</head>

	<body class="page-admin-configproperty project-cpf-parent" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="../"><span class="color-highlight">CPF</span></a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../index.html" title="About">About</a></li>
									<li ><a href="../install.html" title="Installation">Installation</a></li>
									<li ><a href="../plugin.html" title="Plug-in Developer Guide">Plug-in Developer Guide</a></li>
									<li ><a href="../client.html" title="Client Developer Guide">Client Developer Guide</a></li>
									<li ><a href="../admin.html" title="Administrars Guide">Administrars Guide</a></li>
									<li class="dropdown-submenu disabled">
										<a title="Reference">Reference</a>
										<ul class="dropdown-menu">
											<li ><a href="../reference/maven.html" title="Maven">Maven</a></li>
											<li ><a href="../reference/authentication.html" title="Authentication">Authentication</a></li>
											<li ><a href="../reference/dataTypes.html" title="Data Types">Data Types</a></li>
											<li ><a href="../reference/fileFormats.html" title="File Formats">File Formats</a></li>
											<li ><a href="../reference/resourceDescription.html" title="Resource Description">Resource Description</a></li>
											<li ><a href="../reference/jobStatus.html" title="Job Status">Job Status</a></li>
											<li ><a href="../reference/structuredData.html" title="Structured Data">Structured Data</a></li>
											<li ><a href="../reference/opaqueData.html" title="Opaque Data">Opaque Data</a></li>
										</ul>
									</li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../cpf-api-plugin/index.html" title="CPF Plug-in">CPF Plug-in</a></li>
									<li ><a href="../cpf-api-client/index.html" title="CPF Client API">CPF Client API</a></li>
									<li ><a href="../cpf-api-app/index.html" title="CPF Application API">CPF Application API</a></li>
									<li ><a href="../cpf-api-worker/index.html" title="CPF Worker API">CPF Worker API</a></li>
									<li ><a href="../cpf-security-openid/index.html" title="CPF Security OpenID">CPF Security OpenID</a></li>
									<li ><a href="../cpf-war-app/index.html" title="CPF Application WAR">CPF Application WAR</a></li>
									<li ><a href="../cpf-war-worker/index.html" title="CPF Base WAR Worker">CPF Base WAR Worker</a></li>
									<li ><a href="../cpf-archetype-plugin/index.html" title="CPF Plug-in Archetype">CPF Plug-in Archetype</a></li>
									<li ><a href="../cpf-archetype-web/index.html" title="CPF Web Archetype">CPF Web Archetype</a></li>
									<li ><a href="../cpf-plugin-test/index.html" title="CPF Test Plug-ins">CPF Test Plug-ins</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="http://github.com/pauldaustin/cpf/" title="GitHub Project" class="externalLink">GitHub Project</a></li>
									<li ><a href="http://github.com/pauldaustin/cpf/issues/" title="Issues (GitHub)" class="externalLink">Issues (GitHub)</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Links <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="http://www.gov.bc.ca/" title="Province of British Columbia" target="_blank" class="externalLink">Province of British Columbia</a></li>
									<li ><a href="http://bcdevexchange.org/" title="BC Developer Exchange" target="_blank" class="externalLink">BC Developer Exchange</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Maven documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li class="dropdown-submenu ">
										<a href="../project-info.html" title="Project Information">Project Information</a>
										<ul class="dropdown-menu">
											<li ><a href="../dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a></li>
											<li ><a href="../dependency-info.html" title="Dependency Information">Dependency Information</a></li>
											<li ><a href="../dependency-management.html" title="Dependency Management">Dependency Management</a></li>
											<li ><a href="../distribution-management.html" title="Distribution Management">Distribution Management</a></li>
											<li ><a href="../index.html" title="About">About</a></li>
											<li ><a href="../license.html" title="Project License">Project License</a></li>
											<li ><a href="../modules.html" title="Project Modules">Project Modules</a></li>
											<li ><a href="../plugin-management.html" title="Plugin Management">Plugin Management</a></li>
											<li ><a href="../plugins.html" title="Project Plugins">Project Plugins</a></li>
											<li ><a href="../team-list.html" title="Project Team">Project Team</a></li>
											<li ><a href="../source-repository.html" title="Source Repository">Source Repository</a></li>
											<li ><a href="../project-summary.html" title="Project Summary">Project Summary</a></li>
										</ul>
									</li>
									<li class="dropdown-submenu ">
										<a href="../project-reports.html" title="Project Reports">Project Reports</a>
										<ul class="dropdown-menu">
											<li ><a href="../apidocs/index.html" title="JavaDocs">JavaDocs</a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<div id="bannerLeft"><h1>Concurrent Processing Framework</h1></div>
				</div>
				<div class="pull-right">
					<a href="http://www.gov.bc.ca/" id="bannerRight"><img src="../images/bc_sun_logo_horiz.gif" alt='"'Province of British Columbia'"' /></a>
				</div>
			</div>
		</div>
	</div>
		<div>
			<ul class="breadcrumb">
				<li><a href="../" title="CPF">CPF</a></li>
				<li class="divider">/</li>
				<li>Configuration</li>
			</ul>
		</div>
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar" data-spy="affix" data-offset-top="250">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#toc-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="nav-collapse collapse" id="toc-nav-collapse">
						<ul id="toc" class="nav">
						<li class="toplevel"><a href="#Configuration" title="Configuration">Configuration</a></li>
						<li class="dropdown">
							<a href="#Configuration_Property_Overview" title="Configuration Property Overview" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">Configuration Property Overview <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#Configuration_Property_Overview" title="Configuration Property Overview">Configuration Property Overview</a></li>
								<li class="divider"></li>
								<li><a href="#Configuration_Property_Fields" title="Configuration Property Fields">Configuration Property Fields</a></li>
								<li><a href="#Environment_Name" title="Environment Name">Environment Name</a></li>
								<li><a href="#Data_Types" title="Data Types">Data Types</a></li>

							</ul>
						</li>
						<li class="toplevel"><a href="#Configuration_Property_Lists" title="Configuration Property Lists">Configuration Property Lists</a></li>
						<li class="toplevel"><a href="#CPF_Configuration_Properties" title="CPF Configuration Properties">CPF Configuration Properties</a></li>
						<li class="toplevel"><a href="#Module_Configuration_Properties" title="Module Configuration Properties">Module Configuration Properties</a></li>
						<li class="toplevel"><a href="#Business_Application_Configuration_Properties" title="Business Application Configuration Properties">Business Application Configuration Properties</a></li>
						<li class="toplevel"><a href="#View_Configuration_Property" title="View Configuration Property">View Configuration Property</a></li>
						<li class="toplevel"><a href="#Add_Configuration_Property" title="Add Configuration Property">Add Configuration Property</a></li>
						<li class="toplevel"><a href="#Delete_Configuration_Property" title="Delete Configuration Property">Delete Configuration Property</a></li>
						<li class="toplevel"><a href="#Edit_Configuration_Property" title="Edit Configuration Property">Edit Configuration Property</a></li>
						<li class="dropdown">
							<a href="#Configuration_Property_Names__Descriptions" title="Configuration Property Names & Descriptions" class="dropdown-toggle" role="button" data-toggle="dropdown" data-target="#">Configuration Property Names & Descriptions <b class="caret"></b></a>
							<ul class="dropdown-menu" role="menu">
								<!-- Repeat the item, otherwise it is not clickable as the dropdown root -->
								<li><a href="#Configuration_Property_Names__Descriptions" title="Configuration Property Names & Descriptions">Configuration Property Names & Descriptions</a></li>
								<li class="divider"></li>
								<li><a href="#CPF_Master_Configuration_Properties" title="CPF Master Configuration Properties">CPF Master Configuration Properties</a></li>
								<li><a href="#CPF_Worker_Configuration_Properties" title="CPF Worker Configuration Properties">CPF Worker Configuration Properties</a></li>

							</ul>
						</li>
						<li class="divider-vertical"></li>
						<li class="toplevel"><a href="#Tuning" title="Tuning">Tuning</a></li>
						<li class="toplevel"><a href="#Master_Tuning" title="Master Tuning">Master Tuning</a></li>
						<li class="toplevel"><a href="#Worker_Tuning" title="Worker Tuning">Worker Tuning</a></li>
						<li class="toplevel"><a href="#Application_Tuning" title="Application Tuning">Application Tuning</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="section"> 
 <div class="section"> 
  <h3 id="Configuration">Configuration</h3> 
  <div class="section"> 
   <h4 id="Configuration_Property_Overview">Configuration Property Overview</h4> 
   <p>The CPF master web application, CPF workers and modules can be configured by setting config properties.</p> 
   <div class="section"> 
    <h5 id="Configuration_Property_Fields">Configuration Property Fields</h5> 
    <p>The following table summarizes the fields used for configuration properties.</p> 
    <table border="0" class="bodyTable table table-striped table-hover"> 
     <thead> 
      <tr class="a"> 
       <th>Field</th> 
       <th>Description</th> 
      </tr> 
     </thead> 
     <tbody> 
      <tr class="b"> 
       <td>Configuration Property Id</td> 
       <td>Unique sequence generated primary key for a configuration property.</td> 
      </tr> 
      <tr class="a"> 
       <td>Environment Name</td> 
       <td>The <a href="#Environment_Name">environment name</a> the configuration property will be used for.</td> 
      </tr> 
      <tr class="b"> 
       <td>Module Name</td> 
       <td>The name of the module the configuration property applies to. The special module names CPF and CPF_WORKER are used for CPF configuration properties.</td> 
      </tr> 
      <tr class="a"> 
       <td>Property Name</td> 
       <td>The name of the property.</td> 
      </tr> 
      <tr class="b"> 
       <td>Value</td> 
       <td>The value of the property.</td> 
      </tr> 
      <tr class="a"> 
       <td>Value Type</td> 
       <td>The <a href="Data Type">data type</a> the value will be converted to.</td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
   <div class="section"> 
    <h5 id="Environment_Name">Environment Name</h5> 
    <p>The configuration properties support the concept of having different configuration properties for different environments. Environment names are currently only used for workers.</p> 
    <p>The special environment name ‘default’ is used as a default value if a configuration property is not created for an environment. For most properties the value of ‘default’ should be used.</p> 
    <p>For example the system could have two worker servers. The first has 2 CPUs and the second has 4. The first could support 16 threads and the second 32 threads. Two environment names 2cpu and 4cpu could be created. The first worker’s environment name would be set to 2cpu and the second 4cpu. A configuration property can be created for the property name cpfWorker.maximumPoolSize for each environment with the values 16 and 32 respectively.</p> 
   </div> 
   <div class="section"> 
    <h5 id="Data_Types">Data Types</h5> 
    <table border="0" class="bodyTable table table-striped table-hover"> 
     <thead> 
      <tr> 
       <th>Type</th> 
       <th>Description</th> 
      </tr> 
     </thead> 
     <tbody> 
      <tr class="a"> 
       <td><tt>string</tt></td> 
       <td>String</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>boolean</tt></td> 
       <td>Boolean</td> 
      </tr> 
      <tr class="a"> 
       <td><tt>long</tt></td> 
       <td>Long</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>int</tt></td> 
       <td>Int</td> 
      </tr> 
      <tr class="a"> 
       <td><tt>double</tt></td> 
       <td>Double</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>float</tt></td> 
       <td>Float</td> 
      </tr> 
      <tr class="a"> 
       <td><tt>short</tt></td> 
       <td>Short</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>byte</tt></td> 
       <td>Byte</td> 
      </tr> 
      <tr class="a"> 
       <td><tt>decimal</tt></td> 
       <td>Big Decimal</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>integer</tt></td> 
       <td>Big Integer</td> 
      </tr> 
      <tr class="a"> 
       <td><tt>QName</tt></td> 
       <td>Qualified name</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>anyURI</tt></td> 
       <td>URI</td> 
      </tr> 
      <tr class="a"> 
       <td><tt>date</tt></td> 
       <td>Date (YYYY-MM-DD)</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>dateTime</tt></td> 
       <td>Date + Time (YYYY-MM-DDTHH:MM:SS)</td> 
      </tr> 
      <tr class="a"> 
       <td><tt>Geometry</tt></td> 
       <td>WKT Geometry</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>Point</tt></td> 
       <td>WKT Point</td> 
      </tr> 
      <tr class="a"> 
       <td><tt>LineString</tt></td> 
       <td>WKT LineString</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>Polygon</tt></td> 
       <td>WKT Polygon</td> 
      </tr> 
      <tr class="a"> 
       <td><tt>GeometryCollection</tt></td> 
       <td>WKT Geometry Collection</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>MultiPoint</tt></td> 
       <td>WKT Multi-Point</td> 
      </tr> 
      <tr class="a"> 
       <td><tt>MultiLineString</tt></td> 
       <td>WKT Multi-LineString</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>MultiPolygon</tt></td> 
       <td>WKT Multi-Polygon</td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Configuration_Property_Lists">Configuration Property Lists</h4> 
   <p>The configuration properties page contains a scrolling table of the configuration properties. The contents of this table can be filtered by typing at least 3 characters in search box. The table will show configuration properties where the environment name, module name, property name, or property value contain those characters characters (ignoring case).</p> 
  </div> 
  <div class="section"> 
   <h4 id="CPF_Configuration_Properties">CPF Configuration Properties</h4> 
   <p>The list of configuration properties for the <a href="CPF_Master_Configuration_Properties">CPF Master</a> and <a href="CPF_Worker_Configuration_Properties">CPF Worker</a> can be viewed using the following steps.</p> 
   <blockquote> 
    <p><b>NOTE:</b> The user must be in the ADMIN user group.</p> 
   </blockquote> 
   <ol style="list-style-type: decimal"> 
    <li>Open the <a class="externalLink" href="http://localhost/admin/">CPF Admin Application</a>.</li> 
    <li>Click the <a class="externalLink" href="http://localhost/admin/configProperties/">Configuration Properties</a> menu item.</li> 
   </ol> 
  </div> 
  <div class="section"> 
   <h4 id="Module_Configuration_Properties">Module Configuration Properties</h4> 
   <p>The list of configuration properties for a module can be viewed using the following steps.</p> 
   <blockquote> 
    <p><b>NOTE:</b> The user must be in the ADMIN, or ADMIN<i>MODULE</i>[MODULE_NAME]_ADMIN groups.</p> 
    <p><b>NOTE:</b> Consult the module’s readme file for details on the supported configuration properties.</p> 
   </blockquote> 
   <ol style="list-style-type: decimal"> 
    <li>Open the <a href="#View_Module">View Module</a> page.</li> 
    <li>Click the <tt>'Configuration Properties'</tt> tab.</li> 
   </ol> 
  </div> 
  <div class="section"> 
   <h4 id="Business_Application_Configuration_Properties">Business Application Configuration Properties</h4> 
   <p>The list of configuration properties for a business application can be viewed using the following steps.</p> 
   <blockquote> 
    <p><b>NOTE:</b> The user must be in the ADMIN, or ADMIN<i>MODULE</i>[MODULE_NAME]_ADMIN groups.</p> 
    <p><b>NOTE:</b> Consult the module’s readme file for details on the supported configuration properties for a business application.</p> 
   </blockquote> 
   <ol style="list-style-type: decimal"> 
    <li>Open the [View Business Application](View Business Application) page.</li> 
    <li>Click the <tt>'Configuration Properties'</tt> tab.</li> 
   </ol> 
  </div> 
  <div class="section"> 
   <h4 id="View_Configuration_Property">View Configuration Property</h4> 
   <p>Configuration properties can be viewed using the following steps.</p> 
   <ol style="list-style-type: decimal"> 
    <li>Open one of the <a href="Configuration_Property_Lists">Configuration Property Lists</a> pages.</li> 
    <li>Scroll or search for the configuration property.</li> 
    <li>Click the link in the ‘ID’ column.</li> 
   </ol> 
  </div> 
  <div class="section"> 
   <h4 id="Add_Configuration_Property">Add Configuration Property</h4> 
   <p>Configuration properties not shown in the list can be added using the following steps. See</p> 
   <p><a href="CPF_Master_Configuration_Properties">CPF Master</a> and <a href="CPF_Worker_Configuration_Properties">CPF Workers</a> for the supported configuration properties. Consult the plug-in’s documentation for the configuration properties they support</p> 
   <ol style="list-style-type: decimal"> 
    <li>Open one of the <a href="Configuration_Property_Lists">Configuration Property Lists</a> pages.</li> 
    <li>Click <button>Add</button> button. 
     <ol style="list-style-type: decimal"> 
      <li>Edit the field values.</li> 
      <li>Click the <button>Save</button> button to create the configuration property, <button>Clear Fields</button> to undo any changes, or <button>Cancel</button> to return to the previous page.</li> 
     </ol></li> 
   </ol> 
  </div> 
  <div class="section"> 
   <h4 id="Delete_Configuration_Property">Delete Configuration Property</h4> 
   <p>A configuration property can be deleted using the following steps.</p> 
   <ol style="list-style-type: decimal"> 
    <li>Open one of the <a href="Configuration_Property_Lists">Configuration Property Lists</a> or <a href="View_Configuration_Property">View Configuration Property</a> pages.</li> 
    <li>Click trash button in the <tt>'Actions'</tt> field for the configuration property to delete.</li> 
    <li>Click the <button>OK</button> button on the confirm delete dialog to delete the configuration property, or <button>Cancel</button> to return to the page.</li> 
   </ol> 
  </div> 
  <div class="section"> 
   <h4 id="Edit_Configuration_Property">Edit Configuration Property</h4> 
   <p>Configuration properties can be edited using the following steps.</p> 
   <ol style="list-style-type: decimal"> 
    <li>Open the <a href="View_Configuration_Property">View Configuration Property</a> page.</li> 
    <li>Click the ‘Edit button’.</li> 
    <li>Edit the field values.</li> 
    <li>Click the <button>Save</button> button to save changes, <button>Revert to Saved</button> to undo any changes, or <button>Cancel</button> to return to previous page.</li> 
   </ol> 
  </div> 
  <div class="section"> 
   <h4 id="Configuration_Property_Names__Descriptions">Configuration Property Names &amp; Descriptions</h4> 
   <p>This section describes the configuration properties used for the CPF master web application and CPF workers.</p> 
   <p>The CPF uses [Java Properties](<a class="externalLink" href="http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#load(java.io.Reader)">http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html#load(java.io.Reader)</a>) files for bootstrap configuration of the CPF master web application and CPF workers. In the properties files use ‘=’ not ‘:’ between the keys and values and escape any ‘:’ characters in property values using ‘:’. Properties with a tick in the ‘Admin App’ column can also be defined using the admin application.</p> 
   <blockquote> 
    <p><b>NOTE:</b> Any changes to configuration properties using the admin application or in the properties file will require the CPF master or CPF worker to be restarted for these properties to take affect.</p> 
   </blockquote> 
   <div class="section"> 
    <h5 id="CPF_Master_Configuration_Properties">CPF Master Configuration Properties</h5> 
    <p>The CPF master web application requires the following properties to be defined in the <tt>/apps/config/cpf.properties</tt> file. The master will ignore any other properties in this file. So where the master and worker are on the same machine they can share the same configuration file.</p> 
    <table border="0" class="bodyTable table table-striped table-hover"> 
     <thead> 
      <tr class="a"> 
       <th>Property Name</th> 
       <th>Description</th> 
       <th>Admin App</th> 
       <th>Data Type</th> 
       <th>Example</th> 
      </tr> 
     </thead> 
     <tbody> 
      <tr class="b"> 
       <td><tt>cpfConfig.baseUrl</tt></td> 
       <td>The HTTP URL to the OAuth/Digest secured CPF web services, including context path on the server cpf is deployed to. The trailing / must be omitted.</td> 
       <td><img src="../../images/cross.png" alt="No" title="No" /></td> 
       <td>URI</td> 
       <td><a class="externalLink" href="http://apps.gov.bc.ca/pub/cpf">http://apps.gov.bc.ca/pub/cpf</a></td> 
      </tr> 
      <tr class="a"> 
       <td><tt>cpfConfig.secureBaseUrl</tt></td> 
       <td>The HTTPS URL to the Siteminder secured CPF web services, including context path on the server cpf is deployed to. The trailing / must be omitted.</td> 
       <td><img src="../../images/cross.png" alt="No" title="No" /></td> 
       <td>URI</td> 
       <td><a class="externalLink" href="https://apps.gov.bc.ca/pub/cpf/secure">https://apps.gov.bc.ca/pub/cpf/secure</a></td> 
      </tr> 
      <tr class="b"> 
       <td><tt>cpfSiteminderLogoutSuccess.logoutUrl</tt></td> 
       <td>The URL to the siteminder logoff page.</td> 
       <td><img src="../../images/cross.png" alt="No" title="No" /></td> 
       <td>URI</td> 
       <td><a class="externalLink" href="https://logon.gov.bc.ca/clp-cgi/logoff.cgi">https://logon.gov.bc.ca/clp-cgi/logoff.cgi</a> or <a class="externalLink" href="https://logontest.gov.bc.ca/clp-cgi/logoff.cgi">https://logontest.gov.bc.ca/clp-cgi/logoff.cgi</a></td> 
      </tr> 
      <tr class="a"> 
       <td><tt>cpfDataSource.url</tt></td> 
       <td>The JDBC URL to the cpf database.</td> 
       <td><img src="../../images/cross.png" alt="No" title="No" /></td> 
       <td>URI</td> 
       <td><tt>jdbc:oracle:thin:@localhost:1521:cpf</tt> or <tt>jdbc\:postgresql\://localhost\:5432/cpf</tt></td> 
      </tr> 
      <tr class="b"> 
       <td><tt>cpfDataSource.password</tt></td> 
       <td>The password for the PROXY_CPF_WEB user account.</td> 
       <td><img src="../../images/cross.png" alt="No" title="No" /></td> 
       <td>String</td> 
       <td>cpf_2009</td> 
      </tr> 
      <tr class="a"> 
       <td id="configProperty_repositoryServer"><tt>ca.bc.gov.cpf.repositoryServer</tt></td> 
       <td>The maven repository to download plugins from.</td> 
       <td><img src="../../images/cross.png" alt="No" title="No" /></td> 
       <td>int</td> 
       <td>https://developer.gov.bc.ca/artifactory/repo/</td> 
      </tr> 
      <tr class="b"> 
       <td id="configProperty_repositoryDirectory"><tt>ca.bc.gov.cpf.repositoryDirectory</tt></td> 
       <td>The cache directory to store maven artifacts.</td> 
       <td><img src="../../images/cross.png" alt="No" title="No" /></td> 
       <td>String</td> 
       <td>/apps/cpf/repository/</td> 
      </tr> 
      <tr class="a"> 
       <td><tt>batchJobService.maxWorkerWaitTime</tt></td> 
       <td>The maximum time (in seconds) the worker will wait in a HTTP request for group to process before trying a new HTTP request. This limits the number of polling requests to the server. Must be less than any HTTP server inactivity timeouts.</td> 
       <td><img src="../../images/tick.png" alt="Yes" title="Yes" /></td> 
       <td>int</td> 
       <td>100</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>batchJobService.fromEmail</tt></td> 
       <td>The email address any emails will be sent from.</td> 
       <td><img src="../../images/tick.png" alt="Yes" title="Yes" /></td> 
       <td>String</td> 
       <td>cpf@localhost</td> 
      </tr> 
      <tr class="a"> 
       <td><tt>mailSender.host</tt></td> 
       <td>The mail server to send emails via.</td> 
       <td><img src="../../images/tick.png" alt="Yes" title="Yes" /></td> 
       <td>String</td> 
       <td>localhost</td> 
      </tr> 
      <tr class="b"> 
       <td>removeOldBatchJobs.daysToKeepOldJobs</td> 
       <td>The number of days that jobs will be kept after the results have been created. After that time the jobs will be removed in the next daily cleanup.</td> 
       <td><img src="../../images/tick.png" alt="Yes" title="Yes" /></td> 
       <td>int</td> 
       <td>7</td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
   <div class="section"> 
    <h5 id="CPF_Worker_Configuration_Properties">CPF Worker Configuration Properties</h5> 
    <p>The CPF worker web application requires the following properties to be defined in the <tt>/apps/config/cpf.properties</tt> file. The worker will ignore any other properties in this file. So where the worker and master are on the same machine they can share the same configuration file.</p> 
    <table border="0" class="bodyTable table table-striped table-hover"> 
     <thead> 
      <tr class="a"> 
       <th>Property Name</th> 
       <th>Description</th> 
       <th>Admin App</th> 
       <th>Data Type</th> 
       <th>Example</th> 
      </tr> 
     </thead> 
     <tbody> 
      <tr class="b"> 
       <td><tt>cpfConfig.internalWebServiceUrl</tt></td> 
       <td>The HTTP URL to the CPF web services behind any reverse proxies. This is used to speed up access from the workers.</td> 
       <td><img src="../../images/cross.png" alt="No" title="No" /></td> 
       <td>URL</td> 
       <td><a class="externalLink" href="http://localhost/pub/cpf">http://localhost/pub/cpf</a></td> 
      </tr> 
      <tr class="a"> 
       <td><tt>cpfWorker.password</tt></td> 
       <td>The password for the cpf_worker user account.</td> 
       <td><img src="../../images/cross.png" alt="No" title="No" /></td> 
       <td>String</td> 
       <td>w0rk3r</td> 
      </tr> 
      <tr class="b"> 
       <td><tt>cpfWorker.environmentName</tt></td> 
       <td>The <a href="#environmentName">environment name</a> used for the worker.</td> 
       <td><img src="../../images/cross.png" alt="No" title="No" /></td> 
       <td>String</td> 
       <td>default</td> 
      </tr> 
      <tr class="a"> 
       <td id="workerPoolSize"><tt>cpfWorker.maximumPoolSize</tt></td> 
       <td>The maximum number of threads on the worker used to execute requests.</td> 
       <td><img src="../../images/tick.png" alt="Yes" title="Yes" /></td> 
       <td>int</td> 
       <td>32</td> 
      </tr> 
     </tbody> 
    </table> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Tuning">Tuning</h3> 
  <p>This section describes the parameters available for tuning the performance and resources used by the system. This section does not include memory tuning as that depends on the specific memory usage for each business application.</p> 
  <ul> 
   <li><a href="Master_Tuning">Master Tuning</a></li> 
   <li><a href="Worker_Tuning">Worker Tuning</a></li> 
   <li><a href="Application_Tuning">Application Tuning</a></li> 
  </ul> 
  <div class="section"> 
   <h4 id="Master_Tuning">Master Tuning</h4> 
   <p>The tuning parameters for the master can be viewed using the <a class="externalLink" href="http://localhost/admin/tuning/">Tuning</a> page. The tuning page shows the number of active threads or connections, the current pool size, largest pool size reached, and the maximum pool size. The maximum pool sizes can be configured using the <a class="externalLink" href="http://localhost/admin/tuning/config">Config</a> button. Changes to the pool sizes will be applied upon saving. If the current active count is greater than the new pool size then those active threads or connections will still be used until they are returned to the pool.</p> 
   <p>The table below shows the thread and database connection pools that can be configured to tune the system.</p> 
   <table border="0" class="bodyTable table table-striped table-hover"> 
    <thead> 
     <tr> 
      <th>Name</th> 
      <th>Description</th> 
      <th>Example Value</th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="a"> 
      <td>Pre Process Thread Pool Size</td> 
      <td>The number of threads that can be used to pre-process new jobs. The pre-processing splits the structured input data requests into groups of requests for execution. During pre-processing a datbase connection will typically be held for the entire duration of the pre-processing. Pre-processing is typically I/O bound.</td> 
      <td>8 = Num Cores * 10% * 5 (thread multiplier)</td> 
     </tr> 
     <tr class="b"> 
      <td>Scheduler Thread Pool Size</td> 
      <td>The number of threads that can be used to schedule groups for jobs. The scheduler reads the structured data for the group from the database into memory. The scheduling operation is typically very fast for groups with small amounts of data. Scheduling is typically I/O bound.</td> 
      <td>16 = Num Cores * 20% * 5 (thread multiplier)</td> 
     </tr> 
     <tr class="a"> 
      <td>Group Result Thread Pool Size</td> 
      <td>The number of threads that can be used to process the group results from the workers via the internal web service. This is not a separate pool of threads. Instead it is the number of servlet container request handling threads that can be processing the group results. If the maximim pool size is reached the web service request will be bocked until a free slot is available. The group results operation is typically very fast for groups with small amounts of data. Processing group results is typically I/O bound.</td> 
      <td>16 = Num Cores * 20% * 5 (thread multiplier)</td> 
     </tr> 
     <tr> 
      <td>Post Process Thread Pool Size</td> 
      <td>The number of threads that can be used to post-process completed jobs. The post-processing creates the structured result file from the results from the execution groups. During post-processing a datbase connection will typically be held for the entire duration of the post-processing. Post-processing is typically I/O bound.</td> 
      <td>8 = Num Cores * 10% * 5 (thread multiplier)</td> 
     </tr> 
     <tr class="b"> 
      <td>Database Connection Pool Size</td> 
      <td>The number of database connections available to all web service and threads on the CPF master application. The minimum value for this is 10% greater than the sum of (Pre Process + Scheduler + Group Result + Post Process) pool sizes.</td> 
      <td>60 = (Pre Process + Scheduler + Group Result + Post Process) * 125%</td> 
     </tr> 
    </tbody> 
   </table> 
   <p>The size of the thread pools will depend on the number of processor cores. The example values shown are for a 4 processor system, each processor with 4 cores. This gives a total of 8 cores (2 * 4).</p> 
   <p>The number of threads configured for the CPF thread pools can exceed the number of cores available on the server. In this case the operating system will schedule the different threads for execution. For processes that are I/O bound (network connections, database calls, or file I/O) the thread will be paused when the I/O operation is blocked. This allows other threads to execute. For I/O bound tasks the number of connections in the pool can be increased to take advantage of the idle time during blocked I/O operations. In the examples this is indicated as the thread multiplier.</p> 
   <blockquote> 
    <p><b>NOTE:</b> the other load on the server should also be considered when defining the size of the pools. The first factor is the number of threads that the servlet container is configured for serving HTTP requests. These connections will consume additional database connections for the CPF web service and CPF admin requests. Also if the database is on the same server then less threads will be available for the CPF.</p> 
    <p><b>NOTE:</b> The exact values for a specific system will need to be defined by experimenting with typical workloads for the business application and server hardware configurations.</p> 
   </blockquote> 
  </div> 
  <div class="section"> 
   <h4 id="Worker_Tuning">Worker Tuning</h4> 
   <p>The CPF worker has a single tuning property <a href="#ConfigProperty_workerPoolSize">cpfWorker.maximumPoolSize</a>. This defines the number of threads used to process groups of requests. The value for this property should be about the same as the Group Result Pool Size on the CPF master. Although if the groups take a lot longer to execute than it takes to save the results on the master then this value can be greater (e.g. 2x or 5x) than the Group Result Pool Size.</p> 
   <p>If the business applications are processor rather than I/O bound then the pool size can be reduced to avoid processor thrashing when switching between threads.</p> 
   <blockquote> 
    <p><b>NOTE:</b> the worker pool size can only be configured in the properties file. See <a href="CPF_Worker_Configuration_Properties">CPF Worker Configuration Properties</a> to set the <tt>cpfWorker.maximumPoolSize</tt>.</p> 
   </blockquote> 
  </div> 
  <div class="section"> 
   <h4 id="Application_Tuning">Application Tuning</h4> 
   <p>The final part of tuning is the application tuning. See <a href="Business_Application_Fields">Business Application Fields</a> to see the full description of the application tuning parameters and how to edit them.</p> 
   <p>The first parameter <a href="#BusinessApplication_numRequestsPerWorker">numRequestsPerWorker</a> controls the number of requests bundled into an execution group to send to the worker. The group size should be configured for business applications that only take milliseconds to process each request. In this case the value can be set to about 100 so that the group execution time takes 1-5 seconds. This reduces the communications overhead per request due to bundling into a group. The value should not be set to large as it will then result in more memory when the group is scheduled and for storage in the database. This could slow down the scheduler.</p> 
   <blockquote> 
    <p><b>NOTE:</b> This value is applied at the time a job is created and can’t be changed for that job afterwards. New jobs get the new group size.</p> 
   </blockquote> 
   <p>The second parameter <a href="#BusinessApplication_maxConcurrentRequests">maxConcurrentRequests</a> controls how many groups for the business application can be scheduled at one time. The actual limit for the concurrent groups executing will depend on the number of threads specified in <a href="#ConfigProperty_workerPoolSize">cpfWorker.maximumPoolSize</a>. For slow business applications this can be used to limit the number of concurrent groups so that it does not prevent other apps from being processed. For fast business applications this could be configured to be greater than the pool of threads on the worker. This has the affect of pre-loading the scheduling queue so that work is ready for the worker as soon as the previous group results are finished.</p> 
  </div> 
 </div> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span1 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2008-2015 <a href="http://www.gov.bc.ca/">Province of British Columbia</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 4.1.4-SNAPSHOT. </span><span class="publishDate">Last Published: 2015-Mar-11. </span></p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="..//js/lightbox.min.js"></script>
	<script src="..//js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="..//js/reflow-skin.js"></script>

	</body>
</html>
