
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2015-Mar-10
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Concurrent Processing Framework &#x2013; CPF Plug-in Maven Project</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/flatly/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="..//css/bootswatch.css" rel="stylesheet" />
		<link href="..//css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/default.min.css" rel="stylesheet" />

		<link href="..//css/lightbox.css" rel="stylesheet" />

		<link href="..//css/site.css" rel="stylesheet" />
		<link href="..//css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->



	</head>

	<body class="page-plugin-mavenproject project-cpf-parent" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="../"><span class="color-highlight">CPF</span></a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../index.html" title="About">About</a></li>
									<li ><a href="../install.html" title="Installation">Installation</a></li>
									<li ><a href="../plugin.html" title="Plug-in Developer Guide">Plug-in Developer Guide</a></li>
									<li ><a href="../client/index.html" title="Client Developer Guide">Client Developer Guide</a></li>
									<li class="dropdown-submenu disabled">
										<a title="Reference">Reference</a>
										<ul class="dropdown-menu">
											<li ><a href="../reference/maven.html" title="Maven">Maven</a></li>
											<li ><a href="../reference/authentication.html" title="Authentication">Authentication</a></li>
											<li ><a href="../reference/dataTypes.html" title="Data Types">Data Types</a></li>
											<li ><a href="../reference/fileFormats.html" title="File Formats">File Formats</a></li>
											<li ><a href="../reference/resourceDescription.html" title="Resource Description">Resource Description</a></li>
											<li ><a href="../reference/jobStatus.html" title="Job Status">Job Status</a></li>
											<li ><a href="../reference/structuredData.html" title="Structured Data">Structured Data</a></li>
											<li ><a href="../reference/opaqueData.html" title="Opaque Data">Opaque Data</a></li>
										</ul>
									</li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../cpf-api-plugin/index.html" title="CPF Plug-in">CPF Plug-in</a></li>
									<li ><a href="../cpf-api-client/index.html" title="CPF Client API">CPF Client API</a></li>
									<li ><a href="../cpf-api-app/index.html" title="CPF Application API">CPF Application API</a></li>
									<li ><a href="../cpf-api-worker/index.html" title="CPF Worker API">CPF Worker API</a></li>
									<li ><a href="../cpf-security-openid/index.html" title="CPF Security OpenID">CPF Security OpenID</a></li>
									<li ><a href="../cpf-war-app/index.html" title="CPF Application WAR">CPF Application WAR</a></li>
									<li ><a href="../cpf-war-worker/index.html" title="Concurrent Processing Framework Base WAR Worker">Concurrent Processing Framework Base WAR Worker</a></li>
									<li ><a href="../cpf-archetype-plugin/index.html" title="CPF Plug-in Archetype">CPF Plug-in Archetype</a></li>
									<li ><a href="../cpf-archetype-web/index.html" title="CPF Web Archetype">CPF Web Archetype</a></li>
									<li ><a href="../cpf-plugin-test/index.html" title="CPF Test Plug-ins">CPF Test Plug-ins</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="http://github.com/pauldaustin/cpf/" title="GitHub Project" class="externalLink">GitHub Project</a></li>
									<li ><a href="http://github.com/pauldaustin/cpf/issues/" title="Issues (GitHub)" class="externalLink">Issues (GitHub)</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Links <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="http://www.gov.bc.ca/" title="Province of British Columbia" target="_blank" class="externalLink">Province of British Columbia</a></li>
									<li ><a href="http://bcdevexchange.org/" title="BC Developer Exchange" target="_blank" class="externalLink">BC Developer Exchange</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Maven documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li class="dropdown-submenu ">
										<a href="../project-info.html" title="Project Information">Project Information</a>
										<ul class="dropdown-menu">
											<li ><a href="../dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a></li>
											<li ><a href="../dependency-info.html" title="Dependency Information">Dependency Information</a></li>
											<li ><a href="../dependency-management.html" title="Dependency Management">Dependency Management</a></li>
											<li ><a href="../distribution-management.html" title="Distribution Management">Distribution Management</a></li>
											<li ><a href="../index.html" title="About">About</a></li>
											<li ><a href="../license.html" title="Project License">Project License</a></li>
											<li ><a href="../modules.html" title="Project Modules">Project Modules</a></li>
											<li ><a href="../plugin-management.html" title="Plugin Management">Plugin Management</a></li>
											<li ><a href="../plugins.html" title="Project Plugins">Project Plugins</a></li>
											<li ><a href="../team-list.html" title="Project Team">Project Team</a></li>
											<li ><a href="../source-repository.html" title="Source Repository">Source Repository</a></li>
											<li ><a href="../project-summary.html" title="Project Summary">Project Summary</a></li>
										</ul>
									</li>
									<li class="dropdown-submenu ">
										<a href="../project-reports.html" title="Project Reports">Project Reports</a>
										<ul class="dropdown-menu">
											<li ><a href="../apidocs/index.html" title="JavaDocs">JavaDocs</a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<div id="bannerLeft"><h1>Concurrent Processing Framework</h1></div>
				</div>
				<div class="pull-right">
					<a href="http://www.gov.bc.ca/" id="bannerRight"><img src="../images/bc_sun_logo_horiz.gif" alt='"'Province of British Columbia'"' /></a>
				</div>
			</div>
		</div>
	</div>
		<div>
			<ul class="breadcrumb">
				<li><a href="../" title="CPF">CPF</a></li>
				<li class="divider">/</li>
				<li>CPF Plug-in Maven Project</li>
			</ul>
		</div>
		<hr class="toc-separator" />
		<div id="toc-bar" class="navbar" data-spy="affix" data-offset-top="250">
			<div class="navbar-inner">
				<div id="toc-scroll-target" class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#toc-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="nav-collapse collapse" id="toc-nav-collapse">
						<ul id="toc" class="nav">
						<li class="toplevel"><a href="#CPF_Plug-in_Maven_Project" title="CPF Plug-in Maven Project">CPF Plug-in Maven Project</a></li>
						<li class="toplevel"><a href="#Create_a_plug-in_project" title="Create a plug-in project">Create a plug-in project</a></li>
						<li class="toplevel"><a href="#Add_Dependencies" title="Add Dependencies">Add Dependencies</a></li>
						<li class="toplevel"><a href="#JDBC_Dependencies" title="JDBC Dependencies">JDBC Dependencies</a></li>
						<li class="toplevel"><a href="#Build_the_plug-in" title="Build the plug-in">Build the plug-in</a></li>
						<li class="toplevel"><a href="#Deploy_a_Plug-in" title="Deploy a Plug-in">Deploy a Plug-in</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="CPF_Plug-in_Maven_Project">CPF Plug-in Maven Project</h2>
 </div> 
 <p>The CPF uses maven modules for the deployment of plug-in modules to the CPF web services. Each CPF plug-in module is a maven project that contains all the code and dependencies of the plug-in. Within the CPF plug-in module one or more <a href="#Business_Application_Classes">Business Application Classes</a> are defined.</p> 
 <div class="section"> 
  <h3 id="Create_a_plug-in_project">Create a plug-in project</h3> 
  <p>The first step is to create a plug-in project. Plug-ins must be developed using Apache Maven 3.0.x.</p> 
  <p>A new plug-in project can be created using the Maven archetype mechanism. The archetype defines a template project that can be created by passing in parameters to the following command.</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>cd ~/projects
mvn \
&nbsp;&nbsp;archetype:generate \
&nbsp; -DinteractiveMode=false \
&nbsp; -DarchetypeGroupId=ca.bc.gov.open.cpf \
&nbsp; -DarchetypeArtifactId=cpf-archetype-plug-in \
&nbsp;&nbsp;-DarchetypeVersion=${project.version} \
&nbsp;&nbsp;-DgroupId=ca.bc.gov \
&nbsp; -DartifactId=demo \
&nbsp; -Dversion=1.0.0-SNAPSHOT \
&nbsp;&nbsp;-Dpackage=ca.bc.gov.demo \
&nbsp;&nbsp;-Dplug-inName=Demo \
&nbsp;&nbsp;-Dplug-inAcronym=demo
</pre> 
   </div> 
  </div> 
  <table border="0" class="bodyTable table table-striped table-hover"> 
   <thead> 
    <tr class="a"> 
     <th>Parameter</th> 
     <th>Description</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="b"> 
     <td><tt>archetypeVersion</tt></td> 
     <td>The most recent version of the CPF framework.</td> 
    </tr> 
    <tr class="a"> 
     <td><tt>groupId</tt></td> 
     <td>The maven group identifier also used as the java package name for the plug-in class. For BC Government plug-ins this should be ca.bc.gov.</td> 
    </tr> 
    <tr class="b"> 
     <td><tt>artifactId</tt></td> 
     <td>The base maven artifact identifier used for the maven modules created in the project. This should be the project acronym for BC Government projects.</td> 
    </tr> 
    <tr class="a"> 
     <td><tt>version</tt></td> 
     <td>The version identifier you’d like to give to your plug-in. Must include -SNAPSHOT the -SNAPSHOT is removed on migration to test and production.</td> 
    </tr> 
    <tr class="b"> 
     <td><tt>package</tt></td> 
     <td>The Java package name for the generated code. Must be <tt>ca.bc.gov.{acronym}</tt> for BC Government projects.</td> 
    </tr> 
    <tr class="a"> 
     <td><tt>pluginName</tt></td> 
     <td>The name of the plug-in. This will be used to generate the plug-in class name and for descriptions in the Maven build files.</td> 
    </tr> 
    <tr class="b"> 
     <td><tt>pluginAcronym</tt></td> 
     <td>The acronym of the plug-in. This will be used to generate the plug-in jar name.</td> 
    </tr> 
   </tbody> 
  </table> 
  <p>The following directory structure would be created if the command were run using the parameters above.</p> 
  <table border="0" class="bodyTable table table-striped table-hover"> 
   <thead> 
    <tr class="a"> 
     <th>File/Directory</th> 
     <th>Description</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="b"> 
     <td><tt>demo/</tt></td> 
     <td>The root directory of the plug-in project.</td> 
    </tr> 
    <tr class="a"> 
     <td><tt>&nbsp;&nbsp;scripts/</tt></td> 
     <td>Any SQL scripts required to create the database or data required by the plug-in. Samples are included.</td> 
    </tr> 
    <tr class="b"> 
     <td><tt>&nbsp;&nbsp;README.txt</tt></td> 
     <td>A sample readme file for deployment to the Ministry. Edit for your application.</td> 
    </tr> 
    <tr class="a"> 
     <td><tt>&nbsp;&nbsp;pom.xml</tt></td> 
     <td>The maven build file for the plug-in.</td> 
    </tr> 
    <tr class="b"> 
     <td><tt>&nbsp;&nbsp;src/</tt></td> 
     <td>The root folder containing the source code and resources.</td> 
    </tr> 
    <tr class="a"> 
     <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;main/java/ca.bc.gov/demo/</tt></td> 
     <td>The java package for the plug-in, add any support classes in here.</td> 
    </tr> 
    <tr class="b"> 
     <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DemoPlug-in.java</tt></td> 
     <td>The java class for the plug-in.</td> 
    </tr> 
    <tr class="a"> 
     <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;main/resources/</tt></td> 
     <td>The non-java resource files to include in the plug-in jar.</td> 
    </tr> 
    <tr class="b"> 
     <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;META-INF/</tt></td> 
     <td>The META-INF directory for the plug-in jar.</td> 
    </tr> 
    <tr class="a"> 
     <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ca.bc.gov.open.cpf.plugin.sf.xml</tt></td> 
     <td>The main CPF spring configuration file for the plug-ins in this module.</td> 
    </tr> 
    <tr class="b"> 
     <td><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ca/bc/gov/demo/Demo.sf.xml</tt></td> 
     <td>The spring configuration file containing any beans used by the plug-ins.</td> 
    </tr> 
   </tbody> 
  </table> 
 </div> 
 <div class="section"> 
  <h3 id="Add_Dependencies">Add Dependencies</h3> 
  <p>A plug-in can include dependencies to additional libraries that are not deployed as part of the core CPF application. These must be approved prior to delivering to the Ministry.</p> 
  <p>All plug-ins must either be available in the <a class="externalLink" href="http://search.maven.org/">Maven central repository</a>. Or a private repository that the CPF is configured to access.</p> 
  <p>If any of the dependencies include dependencies to logging frameworks such as LOG4J, SLF4J and especially commons-logging these must be <a class="externalLink" href="http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html#Dependency_Exclusions">excluded</a> from those dependencies. This ensures that carefully controlled versions of these files are used. The CPF internally uses SLF4J as the logging API with a LOG4J binding to perform the actual logging and a bridge so that commons logging is logged via SLF4J. It is recommended for plug-ins to use SLF4J for logging in their module. Plug-ins must not include a <tt>log4j.xml</tt> file in their Jar file. A <tt>log4j.xml</tt> file can however be included in <tt>src/test/resources</tt> for testing the plug-in.</p> 
  <p>Any dependencies that are included in the CPF application itself must be marked with a scope of <tt>provided</tt>. If they are dependencies of other modules then they should be excluded from that dependency. CPF ignores any dependencies to the CPF libraries or the libraries it uses. This ensures that the correct versions of these libraries are used at runtime.</p> 
  <p>Any dependencies to test frameworks such as junit must be included using the <tt>test</tt> scope so that they are not included in the jar. Also any test code must be included below <tt>src/test</tt> as opposed to <tt>src/main</tt>.</p> 
 </div> 
 <div class="section"> 
  <h3 id="JDBC_Dependencies">JDBC Dependencies</h3> 
  <p>The CPF supports the Oracle and PostgreSQL with PostGIS extensions JDBC drivers. The dependencies to these drivers are included through the <tt>cpf-api-plugin</tt> dependency.</p> 
  <blockquote> 
   <p>*<i>NOTE:</i> At this time no other versions of these JDBC drivers or 3rd party JDBC drivers are supported. Any dependencies to those drivers must be excluded from the plug-in’s dependencies. Other JDBC driver versions may interfere with the running of the CPF application.</p> 
  </blockquote> 
 </div> 
 <div class="section"> 
  <h3 id="Build_the_plug-in">Build the plug-in</h3> 
  <p>The plug-in is built using maven. Use the following command to create a clean build that is deployed to your local maven repository.</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>mvn clean install
</pre> 
   </div> 
  </div> 
  <p>The plug-in must be deployed to a maven repository so that the CPF can download the plug-in. If on a developers workstation a local maven cache can be used instead of this step.</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>mvn deploy
</pre> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Deploy_a_Plug-in">Deploy a Plug-in</h3> 
  <p>Plug-ins are deployed dynamically using the CPF admin application. Follow this procedure to deploy a new module.</p> 
  <ol style="list-style-type: decimal"> 
   <li>Open the CPF modules admin page.</li> 
   <li>Click the Add button on the Modules page.</li> 
   <li>Enter the project acronym as the module name (e.g. DEMO), it will be converted to upper case.</li> 
   <li>Enter in the maven module Id for your plug-in in the format <tt>{groupId}:{artifactId}:{version}</tt>. For example <tt>com.myapplication:demo:1.0.0-SNAPSHOT</tt>.</li> 
   <li>Click the Save button</li> 
   <li>The module view page will be displayed.</li> 
  </ol> 
  <p>If the version number of a module changes, follow this procedure to update the version for an existing module.</p> 
  <ol style="list-style-type: decimal"> 
   <li>Open the CPF modules admin page.</li> 
   <li>Click on the name of the module in the table, this will open the module view page.</li> 
   <li>Click on the name of the module in the table, this will open the module view page.</li> 
   <li>Click Edit button to edit the module.</li> 
   <li>Enter in the maven module Id for your plug-in in the format <tt>{groupId}:{artifactId}:{version}</tt>. For example <tt>com.myapplication:demo:1.0.0-SNAPSHOT</tt>.</li> 
   <li>Click the Save button</li> 
   <li>The module view page will be displayed.</li> 
   <li>Click the restart button to load the new version of the module.</li> 
  </ol> 
  <blockquote> 
   <p><b>NOTE:</b> You cannot change the name of the module. Delete the existing module and create a new one.</p> 
  </blockquote> 
 </div> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span1 bottom-nav">
					<ul class="nav nav-list">
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2008-2015 <a href="http://www.gov.bc.ca/">Province of British Columbia</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 4.1.4-SNAPSHOT. </span><span class="publishDate">Last Published: 2015-Mar-10. </span></p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="..//js/lightbox.min.js"></script>
	<script src="..//js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="..//js/reflow-skin.js"></script>

	</body>
</html>
