CREATE TABLE CPF_BATCH_JOB_RESULTS (
  BATCH_JOB_RESULT_TYPE           CHARACTER VARYING(50)          NOT NULL,
  DOWNLOAD_TIMESTAMP              TIMESTAMP WITHOUT TIME ZONE,
  SEQUENCE_NUMBER                 INTEGER                        NOT NULL,
  RESULT_DATA                     OID,
  RESULT_DATA_CONTENT_TYPE        CHARACTER VARYING(255)         NOT NULL,
  RESULT_DATA_URL                 CHARACTER VARYING(2000),
  WHO_CREATED                     CHARACTER VARYING(36)          NOT NULL,
  WHEN_CREATED                    TIMESTAMP WITHOUT TIME ZONE    NOT NULL,
  WHO_UPDATED                     CHARACTER VARYING(36)          NOT NULL,
  WHEN_UPDATED                    TIMESTAMP WITHOUT TIME ZONE    NOT NULL,
  BATCH_JOB_ID                    BIGINT                         NOT NULL,
  
  CONSTRAINT BATCH_JOB_RESULTS_PK PRIMARY KEY (BATCH_JOB_ID, SEQUENCE_NUMBER),
  CONSTRAINT BATCH_JOB_RESULTS_FK FOREIGN KEY (BATCH_JOB_ID) REFERENCES CPF.CPF_BATCH_JOBS(BATCH_JOB_ID) ON DELETE CASCADE
);

CREATE INDEX CPF_BJR_BJ_FK_I ON CPF.CPF_BATCH_JOB_RESULTS (BATCH_JOB_ID);
